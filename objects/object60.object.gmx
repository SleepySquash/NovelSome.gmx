<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>mouse_clear(mb_middle); music_play(""); tpSList=ds_list_create(); tpSChanList=ds_list_create(); sChanged=0; dpressed=-1; bfx=0; bfy=0; bttime=0; lstxz=0; lstyz=0;
novid=global.nEDid; alpha=0; etype=0; goToMenu=0; stfldr=0; fldr=0; tpBack=""; tpMusic=""; tpMuStart=0; tpBSprite=noone; tpOutColor=c_dkgray; chCon=0; shType=0; guiSel=0;
yrest=0; nEditing=0; tabSelected=-1; tpScenarioCount=0; isHoverAdding=-1; xzoff=0; yzoff=0; shMenu=0; zoomHolding=0; tpColor=c_white; showCon=1; lstSel=0; selRefresh=0;
tpBoolCount=0; tpIntegerCount=0; tpStringCount=0; tpCharCount=0; tpCharEnd=0; x5zoff=0; y5zoff=0; dpressed5=-1; dpressed52=-1; dpressed53=-1; statReading=0; stSel=0;
chPackCount=0; chPack[0]=""; tpPackStart[0]=0; tpPackEnd[0]=0; exMenu=0; isex[0]=0; exMenuEnabled=0; maxtxtw=0; exStart=0; mUnderExMenu=0; goToStore=0;
fs=window_get_fullscreen(); if (fs) {window_set_fullscreen(0);} for (i=1;i&lt;=40;i+=1) {gsel[i]=0;} chzoom=0; chmzoom=1; chSel=0; stzoom=0; stmzoom=1; tpCName=""; tpCName_r="";
novdat.boolCount[novid]=0; novdat.integerCount[novid]=0; novdat.stringCount[novid]=0; novdat.charCount[novid]=0; statRStart=-1; iSel=-1; hoverid=-2; aperson=noone;
bSpr=global.menuBackgroundBlur; iNodelay=0; iNowait=0; iWait=0; tpStName=""; dprd1=-1; dprd2=-1; rlChan=0; //if (novid==global.novelCount) {story_imitate_blank(novid);}
window_reset_size();
cFChange=1; if (global.isNExists&gt;-1) {cFChange=0; if (novdat.isActive[global.isNExists]) {etype=1;} else {
    if (!directory_exists(working_directory+novdat.FolName[global.isNExists])) {cFChange=1;}}}
if (global.isNExists&lt;=-1) {tpName=""; tpRName=""; tpAuthor=""; tpCreator=""; tpFolderName=""; tpASCIIName=""; tpScenario=""; mScenario=""; tpFileName=""; tpDescription=""; tpGCount=0; tpStoryType=-1;
if (global.loggedIn) {tpAuthor=string(global.username); tpCreator=string(global.username);}}
else {tpName=novdat.RName[global.isNExists]; tpRName=novdat.RName[global.isNExists]; tpFolderName=novdat.FolName[global.isNExists]; if (novdat.isActive[global.isNExists]) {nEditing=1;}
    tpASCIIName=novdat.ASCIIName[global.isNExists];
    tpAuthor=novdat.Author[global.isNExists]; tpCreator=novdat.Creator[global.isNExists]; if (tpFolderName=="Novels\") {tpFolderName=tpName;}
    if (string_copy(tpFolderName,1,string_length("Novels\"))=="Novels\") {
        if (string_length(tpFolderName)==string_length("Novels\")) {tpFolderName=tpName;
    } else {tpFolderName=string_copy(tpFolderName,string_length("Novels\")+1,string_length(tpFolderName)-string_length("Novels\"));}}
    else if (string_copy(tpFolderName,1,string_length("Novels/"))=="Novels/") {if (string_length(tpFolderName)==string_length("Novels/")) {tpFolderName=tpName;
    } else {tpFolderName=string_copy(tpFolderName,string_length("Novels/")+1,string_length(tpFolderName)-string_length("Novels/"));}}
    if (!novdat.isActive[novid]) {fSet=check_for_folder_available(tpFolderName); if (fSet!="") {tpFolderName=fSet; fldr=1;}}
    tpBack=novdat.Background[global.isNExists]; tpMusic=novdat.Music[global.isNExists]; tpMuStart=novdat.MusicPreview[global.isNExists];
    tpScenario=novdat.scenario[global.isNExists]; tpFileName=novdat.FileName[global.isNExists]; tpStoryType=novdat.StoryType[global.isNExists];
    tpDescription=novdat.Description[global.isNExists]; tpGCount=novdat.GenreCount[global.isNExists]; for (gi=1;gi&lt;=tpGCount;gi+=1) {tpGenre[gi]=novdat.Genre[global.isNExists,gi]; gsel[tpGenre[gi]]=1;}
    if (novdat.isActive[global.isNExists]) {showCon=0; tpColor=novdat.Color[global.isNExists]; tpOutColor=novdat.OutColor[global.isNExists];} mScenario=tpScenario; tpScenarioCount+=1;
    
    if (FS_file_exists(FS_current_directory()+"\Novels\"+tpFolderName+"\"+tpFileName+".nsndat")) {FS_ini_open(FS_current_directory()+"\Novels\"+tpFolderName+"\"+tpFileName+".nsndat");
    for (i=1;FS_ini_key_exists("EVENT:INIT","bool"+string(i));i+=1) {
            novdat.bool[novid,i]=FS_ini_read_real("EVENT:INIT","bool"+string(i),0);} novdat.boolCount[novid]=i-1; tpBoolCount=i-1;
    for (i=1;FS_ini_key_exists("EVENT:INIT","integer"+string(i));i+=1) {
        novdat.integer[novid,i]=FS_ini_read_real("EVENT:INIT","integer"+string(i),0);} novdat.integerCount[novid]=i-1; tpIntegerCount=i-1;
    for (i=1;FS_ini_key_exists("EVENT:INIT","string"+string(i));i+=1) {
        novdat.strng[novid,i]=FS_ini_read_string("EVENT:INIT","string"+string(i),"");} novdat.stringCount[novid]=i-1; tpStringCount=i-1;
    for (i=1;FS_ini_key_exists("EVENT:INIT","char"+string(i));i+=1) {novdat.charf[novid,i]="";
        novdat.char[novid,i]=FS_ini_read_string("EVENT:INIT","char"+string(i),""); novdat.charanim[novid,i]="";
        novdat.dchar[novid,i]=FS_ini_read_string("EVENT:INIT","dchar"+string(i),""); if (novdat.dchar[novid,i]=="") {novdat.dchar[novid,i]=novdat.char[novid,i];}
        novdat.charimg[novid,i]=FS_ini_read_string("EVENT:INIT","char"+string(i)+"_img",""); novdat.cdeleted[novid,i]=0;
        novdat.charimg_close[novid,i]=FS_ini_read_string("EVENT:INIT","char"+string(i)+"_imgclose",""); novdat.cpack[novid,i]=0;
            novdat.charimg_closeoffx_set[novid,i]=0; novdat.charimg_closeoffy_set[novid,i]=0;
            if (FS_ini_key_exists("EVENT:INIT","char"+string(i)+"_imgclose_offsetx")) {novdat.charimg_closeoffx_set[novid,i]=1;
                novdat.charimg_closeoffx[novid,i]=FS_ini_read_real("EVENT:INIT","char"+string(i)+"_imgclose_offsetx",0);}
            if (FS_ini_key_exists("EVENT:INIT","char"+string(i)+"_imgclose_offsety")) {novdat.charimg_closeoffy_set[novid,i]=1;
                novdat.charimg_closeoffy[novid,i]=FS_ini_read_real("EVENT:INIT","char"+string(i)+"_imgclose_offsety",0);}
        novdat.charimg_far[novid,i]=FS_ini_read_string("EVENT:INIT","char"+string(i)+"_imgfar","");
            novdat.charimg_faroffx_set[novid,i]=0; novdat.charimg_faroffy_set[novid,i]=0;
            if (FS_ini_key_exists("EVENT:INIT","char"+string(i)+"_imgfar_offsetx")) {novdat.charimg_faroffx_set[novid,i]=1;
                novdat.charimg_faroffx[novid,i]=FS_ini_read_real("EVENT:INIT","char"+string(i)+"_imgfar_offsetx",0);}
            if (FS_ini_key_exists("EVENT:INIT","char"+string(i)+"_imgfar_offsety")) {novdat.charimg_faroffy_set[novid,i]=1;
                novdat.charimg_faroffy[novid,i]=FS_ini_read_real("EVENT:INIT","char"+string(i)+"_imgfar_offsety",0);}
        novdat.charimg_normal[novid,i]=FS_ini_read_string("EVENT:INIT","char"+string(i)+"_imgnormal","");
            novdat.charimg_normaloffx_set[novid,i]=0; novdat.charimg_normaloffy_set[novid,i]=0;
            if (FS_ini_key_exists("EVENT:INIT","char"+string(i)+"_imgnormal_offsetx")) {novdat.charimg_normaloffx_set[novid,i]=1;
                novdat.charimg_normaloffx[novid,i]=FS_ini_read_real("EVENT:INIT","char"+string(i)+"_imgnormal_offsetx",0);}
            if (FS_ini_key_exists("EVENT:INIT","char"+string(i)+"_imgnormal_offsety")) {novdat.charimg_normaloffy_set[novid,i]=1;
                novdat.charimg_normaloffy[novid,i]=FS_ini_read_real("EVENT:INIT","char"+string(i)+"_imgnormal_offsety",0);}
        novdat.charanim[novid,i]=""; novdat.states[novid,i]=0; if (novdat.charimg_far[novid,i]!="") {novdat.states[novid,i]+=1; novdat.state[i,novdat.states[novid,i]]="far";}
        if (novdat.charimg_normal[novid,i]!="") {novdat.states[novid,i]+=1; novdat.state[i,novdat.states[novid,i]]="normal";}
        if (novdat.charimg_close[novid,i]!="") {novdat.states[novid,i]+=1; novdat.state[i,novdat.states[novid,i]]="close";}
        novdat.charclr[novid,i]=FS_ini_make_color("EVENT:INIT","char"+string(i)+"_clr",c_yellow);
        if (FS_ini_key_exists("EVENT:INIT","char"+string(i)+"_outclrr")) {
            novdat.charoutclr[novid,i]=FS_ini_make_color("EVENT:INIT","char"+string(i)+"_outclr",c_black);} else {
            novdat.charoutclr[novid,i]=color_get_darkest(novdat.charclr[novid,i]);}} novdat.charCount[novid]=i-1; tpCharEnd=i-1; tpCharCount=i-1;
    chPackCount=1; chPack[0]=novdat.FolName[novid]+"\";
        for (i=1;FS_ini_key_exists("EVENT:INIT","charpack"+string(i));i+=1) {chPack[i]=FS_ini_read_string("EVENT:INIT","charpack"+string(i),""); chAPack[i]="PACK NOT INSTALLED";
            if (string_copy(chPack[i],string_length(chPack[i]),1)=="\" || string_copy(chPack[i],string_length(chPack[i]),1)=="/") {
                chPack[i]=string_copy(chPack[i],1,string_length(chPack[i])-1);}
            if (string_copy(chPack[i],1,string_length("Stuff\"))=="Stuff\" || string_copy(chPack[i],1,string_length("Stuff/"))=="Stuff/") {
                chAPack[i]=string_copy(chPack[i],string_length("Stuff\")+1,string_length(chPack[i])-string_length("Stuff\"));
                if (string_copy(chAPack[i],1,string_length("Characters\"))=="Characters\" || string_copy(chAPack[i],1,string_length("Characters/"))=="Characters/") {
                    chAPack[i]=string_copy(chAPack[i],string_length("Characters\")+1,string_length(chAPack[i])-string_length("Characters\"));}}
            chPackCount+=1;}
        enIn=0; pri=1; if (chPackCount==1) {pri=0; enIn=1;} for (i=pri;i&lt;chPackCount;i+=1) {tpPackStart[i]=novdat.charCount[novid]+1; tpPackEnd[i]=novdat.charCount[novid]+1;
        if (!FS_directory_exists(working_directory+chPack[i])) {if (i!=0) {notcen_add("E","You don't have CharacterPack installed.");}} else {
        chFind=file_find_all(working_directory+chPack[i],"nschar"); if (chFind) {tpPackStart[i]=novdat.charCount[novid]+1;
        bfC=novdat.charCount[novid]; for (ii=0;ii&lt;global.file_find_all_count;ii+=1) {if (file_exists(global.file_find_all_file[ii])) {
            file=file_text_open_read(global.file_find_all_file[ii]); fstr=file_text_read_string(file);
            if (fstr!="DELETED") {nst=1; novdat.charCount[novid]+=1; chid=novdat.charCount[novid];
            char_imitate_blank_nolist(novid,chid); novdat.charf[novid,chid]=global.file_find_all_file[ii]; if (i&gt;=1) {novdat.cpack[novid,chid]=1;}
            while (!file_text_eof(file)) {if (!nst) {fstr=file_text_read_string(file);} nst=0;
                if (string_copy(fstr,1,string_length("name "))=="name ") {novdat.char[novid,chid]=string_copy(fstr,string_length("name ")+1,string_length(fstr)-string_length("name "));
                    if (novdat.dchar[novid,chid]=="") {novdat.dchar[novid,chid]=novdat.char[novid,chid];}}
                else if (string_copy(fstr,1,string_length("sprite "))=="sprite ") {spname=string_copy(fstr,string_length("sprite ")+1,string_length(fstr)-string_length("sprite "));
                    novdat.states[novid,chid]+=1; novdat.state[chid,novdat.states[novid,chid]]=spname;}
                else if (string_copy(fstr,1,string_length("dname "))=="dname ") {novdat.dchar[novid,chid]=string_copy(fstr,string_length("dname ")+1,string_length(fstr)-string_length("dname "));}
                else if (string_copy(fstr,1,string_length("dname_"))=="dname_") {lan=string_get_sstring(fstr,string_length("dname_")+1); if (lan!="") {
                    if (global.localisation==lan) {novdat.dchar[novid,chid]=string_copy(fstr,string_length("dname_ ")+string_length(lan)+1,string_length(fstr)-string_length("dname_ ")-string_length(lan));}}}
                else if (string_copy(fstr,1,string_length("color "))=="color ") {clr1=string_get_snumber(fstr,string_length("color ")+1);
                    clr2=string_get_snumber(fstr,string_length("color ")+string_length(clr1)+2); clr3=string_get_snumber(fstr,string_length("color ")+string_length(clr1)+3);
                    novdat.charclr[novid,chid]=make_colour_rgb(real(clr1),real(clr2),real(clr3));}
                else if (string_copy(fstr,1,string_length("ocolor "))=="ocolor ") {clr1=string_get_snumber(fstr,string_length("ocolor ")+1);
                    clr2=string_get_snumber(fstr,string_length("ocolor ")+string_length(clr1)+2); clr3=string_get_snumber(fstr,string_length("ocolor ")+string_length(clr1)+3);
                    novdat.charoutclr[novid,chid]=make_colour_rgb(real(clr1),real(clr2),real(clr3));} file_text_readln(file);}} file_text_close(file);}}
                        if (bfC!=novdat.charCount[novid]) {tpPackEnd[i]=novdat.charCount[novid]+1;}}} if (enIn) {break;} if (i+1==chPackCount) {i=-1; enIn=1;}}
    FS_ini_close(); tpCharCount=novdat.charCount[novid]; if (tpCharCount&gt;=1) {chSel=1;
        stSel=0; if (novdat.states[novid,chSel]&gt;0) {stSel=1;}}} else {notcen_add("E","Error loading .nsndat file");}
    
    }
trTo=etype; lastTr=trTo; xxw=4; xxws[0]=0; xxws[1]=0; xxws[2]=0; xxws[3]=0; xxws[4]=0; xxws[5]=0; scenarioOpened=-1; lstTSel=-1; animationOpened=-1;
tpSLineCount=0; if (tpScenario!="") {if (FS_file_exists(FS_current_directory()+"\Novels\"+tpFolderName+"\"+tpScenario)) {
    editor_load_scenario(FS_current_directory()+"\Novels\"+tpFolderName+"\"+tpScenario); scenarioOpened=1; tabSelected=0;}}
if (global.isTesting) {xzoff=global.lexzoom; yzoff=global.leyzoom; x5zoff=global.lex5zoom; y5zoff=global.ley5zoom; chSel=global.lstchSel; stSel=global.lststSel; guiSel=global.lstguiSel; global.isTesting=0;}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (sprite_exists(tpBSprite)) {sprite_delete(tpBSprite);}
if (fs) {window_set_fullscreen(1);}
ds_list_destroy(tpSList); ds_list_destroy(tpSChanList);
if (instance_exists(aperson)) {with (aperson) {instance_destroy();}}
if (novid!=-1) {if (rlChan &amp;&amp; tpFolderName!="") {FS_ini_open(working_directory+"Data\ndb\"+string(novdat.prefix[novid]+novdat.Folder[novid])+".nsldb");
    crTime=generate_time(); novdat.ACpose[novid]=real(string(crTime)+"."+string(novid)+string(irandom(9999)));
    //ds_priority_delete_value(novdat.prchanged,novid); ds_priority_add(novdat.prchanged,novid,crTime);
    //_prlist=ds_priority_create(); ds_priority_copy(_prlist,novdat.prchanged); for (i=0;i&lt;global.novelCount;i+=1) {
    //    novdat.chanPose[i]=ds_priority_delete_min(_prlist);} ds_priority_destroy(_prlist);
    FS_ini_write_real(global.uniqueNumber,"changed",real(crTime)); novel_refresh_sort(1); FS_ini_close();}}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>other</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (!goToMenu &amp;&amp; !goToStore) {if (trTo!=lastTr) {if (alpha&gt;0) {alpha-=0.12*Time.deltatime;} else {lastTr=trTo; if (chCon) {showCon=0; chCon=0;} etype=trTo;}} else {
    if (alpha&lt;1) {alpha+=0.12*Time.deltatime;}}} else {if (instance_exists(aperson)) {aperson.dest=1;}
    if (alpha&gt;0) {alpha-=0.12*Time.deltatime;} else {global.shMExpaned=global.isNExists; global.isNExists=-1; if (goToMenu) {
        room_goto(global.lRMenu);} else {room_goto(room_store);}}}
if (tpBack!="") {if (FS_file_exists(FS_current_directory()+"\Novels\"+tpFolderName+"\"+tpBack)) {
    if (!sprite_exists(tpBSprite)) {tpBSprite=sprite_add(FS_current_directory()+"\Novels\"+tpFolderName+"\"+tpBack,1,0,0,0,0); if (sprite_exists(tpBSprite)) {
        sprite_set_offset(tpBSprite,sprite_get_width(tpBSprite)/2,sprite_get_height(tpBSprite)/2); bSpr=tpBSprite;
        //if (sprite_get_width(tpBSprite)&gt;view_wview+360||sprite_get_height(tpBSprite)&gt;view_hview+360) {notcen_add("E",lang.the_background_too_large);}
        //if (sprite_get_width(tpBSprite)&lt;=view_wview/2||sprite_get_height(tpBSprite)&lt;=view_hview/2) {notcen_add("E",lang.the_background_too_small);}
        }}}}
if (sprite_exists(bSpr)) {moffx=-(view_wview*0.008/2)+(mouse_x-view_xview)*0.008; moffy=-(view_hview*0.008/2)+(mouse_y-view_yview)*0.008;
    //if (sprite_get_width(bSpr)&gt;view_wview+(view_wview*global.backOMove)) {mbackx=1;} else {mbackx=((sprite_get_width(bSpr)+(view_wview*global.backOMove)))/view_wview;}
    //if (sprite_get_height(bSpr)&gt;view_hview+(view_wview*global.backOMove)) {mbacky=1;} else {mbacky=((sprite_get_height(bSpr)+(view_hview*global.backOMove)))/view_hview;}
    mbackx=(view_wview+(view_wview*0.008))/((sprite_get_width(bSpr))); mbacky=(view_hview+(view_hview*0.008))/((sprite_get_height(bSpr)));
    if (mbackx&gt;mbacky) {mbacky=mbackx;} else {mbackx=mbacky;}
    //mbackx=((sprite_get_width(global.menuBackground)+(view_wview*0.008)))/view_wview;
    //mbacky=((sprite_get_height(global.menuBackground)+(view_hview*0.008)))/view_hview;
    alphmod=2; if (tabSelected==0 &amp;&amp; scenarioOpened!=-1) {alphmod=3;}
    draw_sprite_ext(bSpr,-1,view_xview+view_wview/2+moffx,view_yview+view_hview/2+moffy,mbackx,mbacky,0,c_white,alpha/alphmod);}
draw_set_alpha(alpha); if (etype==3) {button_set_clickble(trTo==3); draw_text_set(Century20,c_white,fa_center,fa_top); xxw=-view_wview/6; yyh=100;
    rside=0; if (mouse_check_button_pressed(mb_right)) {rside=1;}
    ed_draw_catbutton(0,lang.type_animemanga); ed_draw_catbutton(1,lang.type_books); ed_draw_catbutton(2,lang.type_cartoons);
    ed_draw_catbutton(3,lang.type_games); ed_draw_catbutton(4,lang.type_filmseries); xxw=view_wview/6; yyh=100;
    ed_draw_catbutton(5,lang.type_other); ed_draw_catbutton(6,lang.type_prf); ed_draw_catbutton(7,lang.type_original);
    ed_draw_catbutton(8,lang.type_comics); ed_draw_catbutton(9,lang.type_muse); if (rside) {trTo=0;}
    if (button_outback(view_xview+view_wview/2,view_yview+view_hview-string_height("A")-4,"&lt; "+lang.back,global.mButtonClr,global.mButtonOutClr,c_black,0)) {trTo=0;}}
draw_set_alpha(alpha); if (etype==2) {button_set_clickble(trTo==2); draw_text_set(Century20,c_white,fa_center,fa_top); xxw=-view_wview/4; yyh=50; ct=0; glvl=0;
    rside=0; if (mouse_check_button_pressed(mb_right)) {rside=1;}
    ed_draw_genrebutton(ct,lang.genre_get); ed_draw_genrebutton(ct,lang.genre_gen); ed_draw_genrebutton(ct,lang.genre_yaoi); ed_draw_genrebutton(ct,lang.genre_yuri);
    ed_draw_genrebutton(ct,lang.genre_romance); ed_draw_genrebutton(ct,lang.genre_angst); ed_draw_genrebutton(ct,lang.genre_comedy); ed_draw_genrebutton(ct,lang.genre_fluff);
    ed_draw_genrebutton(ct,lang.genre_drama); ed_draw_genrebutton(ct,lang.genre_fantasy); ed_draw_genrebutton(ct,lang.genre_fiction); ed_draw_genrebutton(ct,lang.genre_mistic);
    ed_draw_genrebutton(ct,lang.genre_detective); ed_draw_genrebutton(ct,lang.genre_action); ed_draw_genrebutton(ct,lang.genre_psychology); ed_draw_genrebutton(ct,lang.genre_philosophy);
    /*xxw=0; yyh=50;*/ ed_draw_genrebutton(ct,lang.genre_parody); ed_draw_genrebutton(ct,lang.genre_daily); ed_draw_genrebutton(ct,lang.genre_darkfic); ed_draw_genrebutton(ct,lang.genre_deathfic);
    ed_draw_genrebutton(ct,lang.genre_horror); ed_draw_genrebutton(ct,lang.genre_pwp); ed_draw_genrebutton(ct,lang.genre_pov); ed_draw_genrebutton(ct,lang.genre_hurtcomfort);
    ed_draw_genrebutton(ct,lang.genre_au); ed_draw_genrebutton(ct,lang.genre_songfic); ed_draw_genrebutton(ct,lang.genre_mythical); ed_draw_genrebutton(ct,lang.genre_experiment);
    ed_draw_genrebutton(ct,lang.genre_er); ed_draw_genrebutton(ct,lang.genre_curtain); ed_draw_genrebutton(ct,lang.genre_poem); ed_draw_genrebutton(ct,lang.genre_omegavers);
    /*xxw=view_wview/4; yyh=50;*/ ed_draw_genrebutton(ct,lang.genre_school); ed_draw_genrebutton(ct,lang.genre_adventure); ed_draw_genrebutton(ct,lang.genre_crossover); ed_draw_genrebutton(ct,lang.genre_drabble);
    ed_draw_genrebutton(ct,lang.genre_criminal); ed_draw_genrebutton(ct,lang.genre_sidestory); ed_draw_genrebutton(ct,lang.genre_thriller); ed_draw_genrebutton(ct,lang.genre_vignette);
    ed_draw_genrebutton(ct,lang.genre_kinetic);
    if (rside) {trTo=0;} if (button_outback(view_xview+view_wview/2,view_yview+view_hview-string_height("A")-4,"&lt; "+lang.back,global.mButtonClr,global.mButtonOutClr,c_black,0)) {trTo=0;}}
draw_set_alpha(alpha); if (etype==0) {draw_text_set(Century20,c_white,fa_left,fa_top); button_set_clickble(trTo==0);
    pwidth=200; if (pwidth*2&lt;string_width(tpName)) {pwidth=string_width(tpName)/2+10;} if (string_width(tpFolderName)&gt;string_width(tpName)) {if (pwidth*2&lt;string_width(tpFolderName)) {pwidth=string_width(tpFolderName)/2+10;}}
    draw_set_alpha(((alpha*255)*0.376)/255); draw_roundrect_colour(view_xview+view_wview/2-pwidth,view_yview+view_hview/2-255,view_xview+view_wview/2+pwidth,view_yview+view_hview/2+255,c_aqua,c_silver,0);
        twheight=400; if (tpDescription!="") {draw_text_set(Century16,c_white,fa_left,fa_top); if (string_height_ext(tpDescription,string_height("A"),310)&gt;twheight-80) {twheight=string_height_ext(tpDescription,string_height("A"),310)+80;} draw_text_set(Century20,c_white,fa_left,fa_top);}
        draw_roundrect_colour(view_xview+view_wview/2+pwidth+15+320,view_yview+view_hview/2-245,view_xview+view_wview/2+pwidth+15,view_yview+view_hview/2+(twheight-245),c_silver,c_lime,0);
        theight=400;
        draw_roundrect_colour(view_xview+view_wview/2-pwidth-15-320,view_yview+view_hview/2-245,view_xview+view_wview/2-pwidth-15,view_yview+view_hview/2+(theight-245),c_silver,c_aqua,0); draw_set_alpha(alpha);
    
    yyh=view_hview/2-240; draw_text_set(Century32,c_white,fa_center,fa_top); draw_text_outline(view_xview+view_wview/2+pwidth+15+160,view_yview+yyh,lang.description); yyh+=string_height("A")+5;
    if (tpDescription=="") {draw_text_set(Century20,c_white,fa_center,fa_top); if (button_outback(view_xview+view_wview/2+pwidth+15+160,view_yview+yyh+string_height("A")/2,lang.add_description,global.mButtonClr,global.mButtonOutClr,c_black,1)) {
        gts=get_string("Type the description here:",""); if (gts!="") {rlChan=1; tpDescription=gts;}}}
    else {draw_text_set(Century16,c_white,fa_center,fa_top); if (button_outbackfixed(view_xview+view_wview/2+pwidth+15+160,view_yview+yyh+string_height_ext(tpDescription,string_height("A"),310)/2,"",310,string_height_ext(tpDescription,string_height("A"),310),global.mButtonClr,global.mButtonOutClr,c_black)) {
            gts=get_string("Type the description here:",tpDescription); if (gts!="") {rlChan=1; tpDescription=gts;}}
        draw_text_set(Century16,c_white,fa_left,fa_top); draw_text_outline_sep(view_xview+view_wview/2+pwidth+20,view_yview+yyh,tpDescription,310);}
    
    yyh=view_hview/2-240; draw_text_set(Century32,c_white,fa_center,fa_top); draw_text_outline(view_xview+view_wview/2-pwidth-15-160,view_yview+yyh,lang.genre); yyh+=string_height("A")+5;
    draw_text_set(Century20,c_white,fa_left,fa_top); if (button_outback(view_xview+view_wview/2-pwidth-15-160,view_yview+yyh+string_height("A")/2,lang.add,c_lime,c_dkgray,c_black,1)) {trTo=2;} yyh+=string_height("A");
    draw_text_set(Century16,c_white,fa_left,fa_top); for (gi=1;gi&lt;=tpGCount;gi+=1) {draw_text_outline(view_xview+view_wview/2-pwidth-15-315,view_yview+yyh,string(get_genre_list(tpGenre[gi]))); yyh+=string_height("A");}
    
    yyh=view_hview/2-254; draw_text_set(Century32,c_white,fa_center,fa_top); draw_text_outline(view_xview+view_wview/2,view_yview+yyh,lang.information); yyh+=string_height("A");
    draw_text_set(Century20,c_white,fa_left,fa_top); draw_text_outline(view_xview+view_wview/2-180,view_yview+yyh,lang.title); yyh+=string_height("A")+2; draw_text_set(Century20,c_white,fa_center,fa_top);
    _str=tpName; clr=global.mButtonClr; if (tpName=="") {_str="Type your novel's title here."; clr=c_red;} if (button_outback(view_xview+view_wview/2,view_yview+yyh+string_height("A")/2,_str,clr,c_dkgray,c_black,1)) {
        gts=get_string("Type your novel's name here: ",tpName); if (gts!="") {rlChan=1; tpName=gts; tpRName=tpName; tpASCIIName=tpName; fSet=check_for_nonASCII(tpName); if (fSet!="") {tpASCIIName=fSet;}
            if (cFChange) {tpFolderName=tpName; fSet=check_for_folder_available(tpName); if (fSet!="") {tpFolderName=fSet; fldr=1;}}}} yyh+=string_height("A")+2;
    /*if (fldr) {draw_text_set(Century16,c_white,fa_center,fa_top); str="The name of your novel contains#some unsupported symbols! The game#has setted your FolderName itself."; draw_text_outline_ext(view_xview+view_wview/2,view_yview+yyh,str,c_red,c_black); yyh+=string_height(str)+2;
        draw_text_set(Century20,c_white,fa_left,fa_top);
        draw_text_outline(view_xview+view_wview/2-180,view_yview+yyh,lang.folder); _str=tpASCIIName; if (tpASCIIName=="") {_str="Type your novel's title in non-ASCII here.";} yyh+=string_height("A")+2;
        draw_text_set(Century20,c_white,fa_center,fa_top); if (button_outback(view_xview+view_wview/2,view_yview+yyh+string_height("A")/2,_str,global.mButtonClr,global.mButtonOutClr,c_black,1)) {
            gts=get_string("Type your novel's title in non-ASCII here: ",tpASCIIName); if (gts!="") {rlChan=1; tpFolderName=gts; fSet=check_for_folder_available(tpFolderName); if (fSet!="") {tpFolderName=fSet;}}} yyh+=string_height("A")+2;
        if (stfldr) {draw_text_set(Century16,c_white,fa_center,fa_top); draw_text_outline_ext(view_xview+view_wview/2,view_yview+yyh,"Type your novel's title in non-ASCII!",c_red,c_black); yyh+=string_height("A")+2;}} else {*/
    draw_text_set(Century20,c_white,fa_left,fa_top); draw_text_outline(view_xview+view_wview/2-180,view_yview+yyh,lang.ascii_name); yyh+=string_height("A")+2;
    if (button_outback(view_xview+view_wview/2,view_yview+yyh+string_height("A")/2,tpASCIIName,global.mButtonClr,global.mButtonOutClr,c_black,1)) {
        gts=get_string("Type your novel's title in non-ASCII here: ",tpASCIIName); if (gts!="") {rlChan=1; tpASCIIName=gts; fSet=check_for_nonASCII(gts); if (fSet!="") {tpASCIIName=fSet;}
            if (cFChange) {tpFolderName=gts; fSet=check_for_folder_available(tpFolderName); if (fSet!="") {tpFolderName=fSet;}}}}
    if (!cFChange) {yyh+=string_height("A")+2; draw_text_set(Century16,c_white,fa_center,fa_top); str="The game can't change your folder#directory. Please, do it manually"; draw_text_outline_ext(view_xview+view_wview/2,view_yview+yyh,str,c_red,c_black);
        yyh+=string_height(str)+2;} else {yyh+=string_height("A")+2;}//}
    draw_text_set(Century20,c_white,fa_left,fa_top); draw_text_outline(view_xview+view_wview/2-180,view_yview+yyh,lang.author); yyh+=string_height("A")+2; draw_text_set(Century20,c_white,fa_center,fa_top);
    _str=tpAuthor; clr=global.mButtonClr; if (tpAuthor=="") {_str="Type your username here."; clr=c_red;} if (button_outback(view_xview+view_wview/2,view_yview+yyh+string_height("A")/2,_str,clr,c_dkgray,c_black,1)) {
        gts=get_string("Type your username here: ",tpAuthor); if (gts!="") {rlChan=1; tpAuthor=gts;}} yyh+=string_height("A")+5;
    draw_text_set(Century20,c_white,fa_left,fa_top); draw_text_outline(view_xview+view_wview/2-180,view_yview+yyh,lang.story_type); yyh+=string_height("A")+2; draw_text_set(Century20,c_white,fa_center,fa_top);
    _str=novel_get_type(tpStoryType); clr=global.mButtonClr; if (tpStoryType==-1) {_str="Choose the category &gt;"; clr=c_red;} if (button_outback(view_xview+view_wview/2,view_yview+yyh+string_height("A")/2,_str,clr,c_dkgray,c_black,1)) {
        trTo=3;/*gts=get_string("Type the type of your novel here: ",tpStoryType); if (gts!="") {tpStoryType=gts;}*/} yyh+=string_height("A")+2;
    draw_text_set(Century32,c_white,fa_center,fa_middle); str=lang.scontinue; clr=c_lime; if (!showCon) {str=lang.back; clr=c_white;}
    if (button_outback(view_xview+view_wview/2,view_yview+view_hview/2+247-string_height("A")/2,str+" &gt;",clr,global.mButtonOutClr,c_black,0)) {
        if (tpName!="" &amp;&amp; tpFolderName!="" &amp;&amp; tpASCIIName!="") {fldr=0; stfldr=0; cFChange=0; if (global.isNExists&lt;=-1) {story_imitate_blank(novid); tpFileName=tpFolderName;} else {if (!cFChange) {/*КОД НА ПЕРЕНОС ДИРЕКТОРИИ*/}}
            if (!FS_directory_exists(FS_current_directory()+"\Novels\"+tpFolderName+"\")) {ns_directory_create(FS_current_directory()+"\Novels\"+tpFolderName+"\");}
            FS_ini_open(FS_current_directory()+"\Novels\"+tpFolderName+"\"+tpFileName+".nsndat"); chCon=1;
                FS_ini_write_string("NOVELDATA","ASCIIName",tpASCIIName); novdat.ASCIIName[novid]=tpASCIIName;
                _str=check_for_folder_availablel(tpName); if (_str=="") {_str=tpName;}
                FS_ini_write_string("NOVELDATA","Folder",_str); novdat.Folder[novid]=_str;
                FS_ini_write_string("NOVELDATA","Name",tpName); novdat.Name[novid]=tpName; novdat.RName[novid]=tpName;
                FS_ini_write_string("NOVELDATA","Author",tpAuthor); novdat.Author[novid]=tpAuthor;
                FS_ini_write_string("NOVELDATA","Creator",tpCreator); novdat.Creator[novid]=tpCreator;
                FS_ini_write_string("NOVELDATA","Description",tpDescription); novdat.Description[novid]=tpDescription;
                FS_ini_write_real("NOVELDATA","StoryType",real(tpStoryType)); novdat.StoryType[novid]=tpStoryType;
                for (gi=1;gi&lt;=tpGCount;gi+=1) {FS_ini_write_real("NOVELDATA","Genre"+string(gi),tpGenre[gi]); novdat.Genre[novid,gi]=tpGenre[gi];} novdat.GenreCount[novid]=tpGCount;
                if (FS_ini_key_exists("NOVELDATA","Genre"+string(tpGCount+1))) {FS_ini_key_delete("NOVELDATA","Genre"+string(tpGCount+1));}
                /*FS_ini_write_string("NOVELDATA","FolderName",tpFolderName);*/ novdat.FolName[novid]="Novels\"+tpFolderName;
                novdat.FName[novid]=FS_current_directory()+"\Novels\"+tpFolderName+"\"+tpFileName+".nsndat"; novdat.FileName[novid]=tpFileName;
                if (global.isNExists&lt;=-1) {chPackCount=1; chPack[0]=novdat.FolName[novid]+"\"; tpPackStart[0]=0; tpPackEnd[0]=0; novdat.TimePlayed[novid]=0;
                    novdat.Version[novid]=0; novdat.Background[novid]=""; novdat.Deleted[novid]=0; novdat.FolderName[novid]=tpFolderName;
                    novdat.Music[novid]=""; novdat.MusicPreview[novid]=0; novdat.isActive[novid]=0; //if (global.isNExists&lt;=-1) {novdat.FileName[novid]=tpFolderName+".nsndat";}
                    novdat.Color[novid]=c_gray; novdat.OutColor[novid]=c_black; novdat.Size[novid]=""; novdat.HasMenu[novid]=0; novdat.HasNSFW[novid]=0; novdat.HasViolence[novid]=0;
                    novdat.novelID[novid]=-1; novdat.prefix[novid]=""; novdat.RName[novid]=tpName;}
            FS_ini_close(); if (global.isNExists&lt;=-1) {global.nEDid=global.novelCount; novid=global.nEDid; global.inNExists=global.nEDid; global.shMType=1; global.isNExists=novid;
                novdat.chanPose[novid]=novid; novdat.sortPose[novid]=novid; FS_ini_open(working_directory+"Data\ndb\"+string(novdat.prefix[novid]+novdat.Folder[novid])+".nsldb");
                crTime=generate_time();
                FS_ini_write_real(global.uniqueNumber,"changed",real(crTime));
                FS_ini_write_real(global.uniqueNumber,"updated",real(crTime));
                FS_ini_write_real(global.uniqueNumber,"date",real(crTime)); FS_ini_close(); global.novelCount+=1;
                notcen_add("N",lang.your_novel_was_created+"!");} else {/*ds_priority_add(novdat.priority,novid,crTime);*/} trTo=1;}}
    if (showCon) {draw_text_set(Century20,c_white,fa_center,fa_top);
    if (button_outback(view_xview+view_wview/2,view_yview+view_hview-string_height("A")-4,"&lt; "+lang.cancel,global.mButtonClr,global.mButtonOutClr,c_black,0)) {goToMenu=1;}}}

if (etype==1) {button_set_clickble(trTo==1); //if (mouse_check_button_pressed(mb_right)) {goToMenu=1;}
    
    draw_text_set(Century16,c_white,fa_left,fa_top); //+175+25+(string_height("A")+2)
    ifDet=0; endDet=0; otside=0; o2side=0; if (mouse_check_button_pressed(mb_left)) {otside=1; o2side=1;} if (mouse_check_button_pressed(mb_right)) {dpressed=-1;} if (mouse_check_button_pressed(mb_middle)) {dpressed=-1;}
    if (tabSelected==0 &amp;&amp; scenarioOpened!=-1 &amp;&amp; global.btCl1) {if (mouse_wheel_down()) {yzoff-=65;} if (mouse_wheel_up()) {yzoff+=65;}} if (yzoff&gt;=0) {guStart=0;} else {
        guStart=-round(yzoff/(string_height("A")+4))-round(175/(string_height("A")+4));} if (guStart&lt;0) {guStart=0;} maxval=guStart+25 if (maxval&gt;ds_list_size(tpSList)) {maxval=ds_list_size(tpSList);}
    if (tabSelected==0 &amp;&amp; scenarioOpened!=-1) {if (guStart&lt;=0) {yyh=0;} else {yyh=(string_height("A")+4)*guStart;} draw_text_set(Century16,c_white,fa_left,fa_top); tpNodelay=0; wamount=0; tpNowait=0; for (i=guStart-1;i&lt;=maxval;i+=1) {
        stanOff=2; if (i==-1) {stanOff=8;} else if (i==ds_list_size(tpSList)-1) {stanOff=8;}
        if (ds_list_size(tpSList)&lt;=0) {if (cursor_under_button(view_xview+view_wview/2-320+xzoff+string_width("НАЧАЛО")/2,view_yview+175+yyh+yzoff+string_height("A")+string_height("A")/2,string_width("НАЧАЛО"),string_height("A")*2+4)) {}}
        if (i==-1) {draw_text_set(Century20,c_white,fa_left,fa_top); draw_text_outline(view_xview+view_wview/2-320+xzoff,view_yview+175+yyh+yzoff,"НАЧАЛО"); yyh+=string_height("НАЧАЛО")+stanOff;
            draw_text_set(Century16,c_white,fa_left,fa_top);}
        else if (i==ds_list_size(tpSList)) {if (cursor_under_button(view_xview+view_wview/2-320+xzoff+string_width("              ")/2,view_yview+175+yyh+yzoff+string_height("A")/2,string_width("              "),string_height("A")+4)) {
            if (dpressed==i) {/*if (mouse_check_button_pressed(mb_left)) {sChanged=1; ds_list_delete(tpSList,i); ds_list_delete(tpSChanList,i);
                if (ds_list_size(tpSList)&lt;=0) {ds_list_insert(tpSList,i," "); ds_list_insert(tpSChanList,i,0);} dpressed=-1; mouse_clear(mb_left);}*/
            } else {if (mouse_check_button_pressed(mb_right) &amp;&amp; line!="" &amp;&amp; line!=" " &amp;&amp; line!=lang.insert_action_here &amp;&amp; global.btCl1) {dpressed=i;}
            if (isHoverAdding!=-1 &amp;&amp; hoverid+1!=i) {if (mouse_check_button_released(mb_left) &amp;&amp; global.btCl1) {rlChan=1; hover_do_action();}
            yyh+=string_height("A")+stanOff+2;}}}
            draw_text_set(Century20,c_white,fa_left,fa_top); draw_text_outline(view_xview+view_wview/2-320+xzoff,view_yview+175+yyh+yzoff,"КОНЕЦ"); yyh+=string_height("КОНЕЦ")+stanOff;
            draw_text_set(Century16,c_white,fa_left,fa_top);} else {cSel=0; if (dpressed==i) {if (iSel==i) {iSel=-1;} line=lang.click_to_delete_me;} else {line=ds_list_find_value(tpSList,i);
                count=0; if (string_copy(line,1,string_length(" "))==" " &amp;&amp; line!=" ") {blnum=""; bldef=""; num="_"; count=1; while (num!="") {_ph=string_copy(line,1,count);
                    if (string_copy(_ph,string_length(_ph),1)!=" ") {_ph=string_copy(_ph,1,string_length(_ph)-1); num="";} else {count+=1; if (count&gt;=global.maxSpaceCount) {break;}}}
                    if (_ph!="") {line=string_copy(line,string_length(_ph)+1,string_length(line)-string_length(_ph));} count=string_length(_ph);}
                ustr=""; if (count&gt;0) {ustr=""; repeat(count) {ustr+=" ";}} if (string_copy(line,1,string_length("background hide"))=="background hide") {line=lang.hide_background;}
                else if (string_copy(line,1,string_length("background "))=="background ") {line=lang.show_background+":#     "+ustr+string_copy(line,string_length("background ")+1,string_length(line)-string_length("background "));}
                else if (string_copy(line,1,string_length("music stop"))=="music stop") {line=lang.stop_music;}
                else if (string_copy(line,1,string_length("music "))=="music ") {line=lang.music+":#     "+ustr+string_copy(line,string_length("music ")+1,string_length(line)-string_length("music "));}
                else if (string_copy(line,1,string_length("sound stop"))=="sound stop") {line=lang.stop_sound;}
                else if (string_copy(line,1,string_length("sound "))=="sound ") {line=lang.sound+":#     "+ustr+string_copy(line,string_length("sound ")+1,string_length(line)-string_length("sound "));}
                else if (string_copy(line,1,string_length("ambient stop"))=="ambient stop") {line=lang.stop_ambient;}
                else if (string_copy(line,1,string_length("ambient "))=="ambient ") {line=lang.ambient+":#     "+ustr+string_copy(line,string_length("ambient ")+1,string_length(line)-string_length("ambient "));}
                else if (string_copy(line,1,string_length("jump "))=="jump ") {line=lang.jump_to+":#     "+ustr+string_copy(line,string_length("jump ")+1,string_length(line)-string_length("jump "));}
                else if (string_copy(line,1,string_length("wait "))=="wait ") {wamount=real(string_digits(string_copy(line,string_length("wait ")+1,string_length(line)-string_length("wait ")))); line=lang.wait+" "+ustr+string(wamount/30)+" "+lang.seconds;}
                else if (string_copy(line,1,string_length("start again"))=="start again") {line=lang.start_again;}
                else if (string_copy(line,1,string_length("if "))=="if ") {ifDet=1; statReading=2; statRStart=i; line=lang.sif+" "+string_copy(line,string_length("if ")+1,string_length(line)-string_length("if "))+" "+lang.sthen;}
                else if (string_copy(line,1,string_length("end"))=="end") {endDet=(statRStart&gt;=i); statRStart=-1; statReading=0; line=lang.s_end;}
                else if (string_copy(line,1,string_length("show "))=="show ") {line=lang.show+string_copy(line,string_length("show "),string_length(line)-string_length("show"));}
                else if (string_copy(line,1,string_length("hide "))=="hide ") {line=lang.hide+string_copy(line,string_length("hide "),string_length(line)-string_length("hide"));}
                if (line==" ") {line=lang.insert_action_here;} isChan=ds_list_find_value(tpSChanList,i);}
        if (iSel!=-1) {if (iSel==i) {iNodelay=tpNodelay; iWait=wamount; iNowait=tpNowait;}} aPh=""; if (wamount!=0) {wamount=0;} if (tpNodelay) {tpNodelay=0; aPh+="nodelay  ";} if (tpNowait) {tpNowait=0; aPh+="nowait  ";}
        ofy=0; dr_round=0; drself=1; if (string_copy(line,1,string_length('"'))=='"') {cSel=1; draw_set_alpha(alpha/3); ofy=10; yyh+=5; dr_round=1; clr1=c_aqua; clr2=c_silver; stanOff=5;}
        else if (string_copy(line,1,string_length(lang.hide_background))==lang.hide_background) {cSel=1; ofy=10; yyh+=5; dr_round=1; clr1=c_purple; clr2=c_silver; stanOff=5;}
        else if (string_copy(line,1,string_length(lang.show_background))==lang.show_background) {cSel=1; ofy=10; draw_set_alpha(alpha/3); yyh+=5; dr_round=1; clr1=c_purple; clr2=c_silver; stanOff=5;}
        else if (string_copy(line,1,string_length(lang.jump_to))==lang.jump_to) {cSel=1; ofy=10; draw_set_alpha(alpha/3); yyh+=5; dr_round=1; clr1=c_gray; clr2=c_silver; stanOff=5;}
        else if (string_copy(line,1,string_length(lang.start_again))==lang.start_again) {ofy=10; draw_set_alpha(alpha/3); yyh+=5; dr_round=1; clr1=c_gray; clr2=c_silver; stanOff=5;}
        else if (string_copy(line,1,string_length(lang.wait))==lang.wait) {cSel=1; ofy=10; draw_set_alpha(alpha/3); yyh+=5; dr_round=1; clr1=c_blue; clr2=c_silver; stanOff=5;}
        else if (string_copy(line,1,string_length(lang.sif))==lang.sif) {cSel=1; ofy=10; draw_set_alpha(alpha/3); yyh+=5; dr_round=1; clr1=c_blue; clr2=c_purple; stanOff=5;}
        else if (string_copy(line,1,string_length(lang.s_end))==lang.s_end) {ofy=10; draw_set_alpha(alpha/3); yyh+=5; dr_round=1; clr1=c_blue; clr2=c_purple; stanOff=5;}
        else if (string_copy(line,1,string_length(lang.stop_music))==lang.stop_music) {ofy=10; draw_set_alpha(alpha/3); yyh+=5; dr_round=1; clr1=c_silver; clr2=c_orange; stanOff=5;}
        else if (string_copy(line,1,string_length(lang.music))==lang.music) {ofy=10; draw_set_alpha(alpha/3); yyh+=5; dr_round=1; clr1=c_silver; clr2=c_orange; stanOff=5;}
        else if (string_copy(line,1,string_length(lang.stop_sound))==lang.stop_sound) {ofy=10; draw_set_alpha(alpha/3); yyh+=5; dr_round=1; clr1=c_silver; clr2=c_orange; stanOff=5;}
        else if (string_copy(line,1,string_length(lang.sound))==lang.sound) {ofy=10; draw_set_alpha(alpha/3); yyh+=5; dr_round=1; clr1=c_silver; clr2=c_orange; stanOff=5;}
        else if (string_copy(line,1,string_length(lang.stop_ambient))==lang.stop_ambient) {ofy=10; draw_set_alpha(alpha/3); yyh+=5; dr_round=1; clr1=c_silver; clr2=c_orange; stanOff=5;}
        else if (string_copy(line,1,string_length(lang.ambient))==lang.ambient) {ofy=10; draw_set_alpha(alpha/3); yyh+=5; dr_round=1; clr1=c_silver; clr2=c_orange; stanOff=5;}
        else if (string_copy(line,1,string_length("nowait"))=="nowait") {drself=0; tpNowait=1;}
        else if (string_copy(line,1,string_length("nodelay"))=="nodelay") {drself=0; tpNodelay=1;}
        else if (string_copy(line,1,string_length(lang.show))==lang.show) {cSel=1; ofy=10; draw_set_alpha(alpha/3); yyh+=5; dr_round=1; clr1=c_purple; clr2=c_lime; stanOff=5;}
        else if (string_copy(line,1,string_length(lang.hide))==lang.hide) {cSel=1; ofy=10; draw_set_alpha(alpha/3); yyh+=5; dr_round=1; clr1=c_purple; clr2=c_lime; stanOff=5;}
        if (drself) {if (count&gt;0) {if (!statReading || statRStart&lt;i) {line=ustr+line;}} else {if (statReading==1 &amp;&amp; statRStart&gt;=i) {repeat (4) {ustr+=" ";} line=ustr+line;}}
        if (statReading==2 &amp;&amp; statRStart&gt;=i) {statReading=1;}
        if (cursor_under_button(view_xview+view_wview/2-320+xzoff+string_width(line)/2,view_yview+175+yyh+yzoff+string_height(line)/2,string_width(line),string_height(line)+4+ofy)) {
            if (dpressed==i) {if (mouse_check_button_pressed(mb_left)) {sChanged=1; rlChan=1; ds_list_delete(tpSList,i); ds_list_delete(tpSChanList,i);
                if (ds_list_size(tpSList)&lt;=0) {ds_list_insert(tpSList,i," "); ds_list_insert(tpSChanList,i,0);} dpressed=-1; mouse_clear(mb_left);}
            } else {if (mouse_check_button_pressed(mb_right) &amp;&amp; line!="" &amp;&amp; line!=" " &amp;&amp; line!=lang.insert_action_here &amp;&amp; global.btCl1) {dpressed=i;}
            if (isHoverAdding!=-1 &amp;&amp; (hoverid!=i &amp;&amp; hoverid+1!=i)) {if (mouse_check_button_released(mb_left) &amp;&amp; global.btCl1) {hover_do_action(); rlChan=1;}
            yyh+=string_height("A")+stanOff+2;} else {if (mouse_check_button_pressed(mb_left) &amp;&amp; global.btCl1) {o2side=0; if (iSel==i) {isHoverAdding=26; hoverid=i;} else {iSel=i;}}}}}
        if (dr_round) {draw_set_alpha(alpha/3); draw_roundrect_colour(view_xview+view_wview/2-320+string_width(ustr)+xzoff-3,view_yview+175+yyh+yzoff-3,view_xview+view_wview/2-320+xzoff+string_width(line)+3,view_yview+175+yyh+yzoff+string_height(line)+3,clr1,clr2,0);}
        if (iSel==i) {draw_set_alpha(alpha); draw_roundrect_colour(view_xview+view_wview/2-320+string_width(ustr)+xzoff-3,view_yview+175+yyh+yzoff-3,view_xview+view_wview/2-320+xzoff+string_width(line)+3,view_yview+175+yyh+yzoff+string_height(line)+3,c_white,c_white,1);}
        draw_set_alpha(alpha); clr=c_white; oclr=c_dkgray; if (dpressed==i) {clr=c_red; oclr=c_black;} else {if (isChan) {clr=c_orange;}}
        if (aPh!="") {draw_text_outline_ext(view_xview+view_wview/2-320+xzoff-string_width(aPh),view_yview+175+yyh+yzoff,aPh,c_silver,c_black);}
        draw_text_outline_ext(view_xview+view_wview/2-320+xzoff,view_yview+175+yyh+yzoff,line,clr,oclr); yyh+=string_height(line)+stanOff;}}}
        
        if (iSel!=-1) {dDelay=0; drMain=0; drUniv=0; dWait=0; hArg=0; dRWait=0; draw_set_alpha(alpha/3); draw_roundrect_colour(view_xview+view_wview-360,view_yview+190,view_xview+view_wview-10,view_yview+190+420,c_black,c_black,0); draw_set_alpha(alpha);
            yyh=195; draw_text_set(Century20,c_white,fa_left,fa_top); str=ds_list_find_value(tpSList,iSel); draw_text_outline(view_xview+view_wview-355,view_yview+yyh,string(str)); yyh+=string_height(str)+4;
            draw_text_set(Century16,c_white,fa_left,fa_top); if (string_copy(str,1,string_length("background "))=="background ") {hArg=1; dDelay=1; dWait=1; drUniv=1;}
            else if (string_copy(str,1,string_length("show "))=="show ") {hArg=1; dDelay=1; dWait=1; drUniv=1;}
            else if (string_copy(str,1,string_length("hide "))=="hide ") {hArg=1; dDelay=1; dWait=1; drUniv=1;}
            else if (string_copy(str,1,string_length("wait "))=="wait ") {hArg=1; dRWait=1; drMain=1;}
            if (!hArg) {draw_text_outline(view_xview+view_wview-355,view_yview+yyh,"This function has no arguments");} else {
                if (drMain) {draw_set_font(Century20); draw_text_outline(view_xview+view_wview-355,view_yview+yyh,"Основные"); yyh+=string_height(str)+4;}
                if (dRWait) {draw_set_font(Century16); if (button_outback(view_xview+view_wview-355+string_width("Wait for: "+string(iWait))/2,view_yview+yyh+string_height("A")/2,"Wait for: "+string(iWait),c_white,c_dkgray,c_black,0)) {} yyh+=string_height(str)+4;}
                if (drUniv) {draw_set_font(Century20); draw_text_outline(view_xview+view_wview-355,view_yview+yyh,"Универсальные"); yyh+=string_height(str)+4;}
                if (dWait) {draw_set_font(Century16); clr=c_white; if (iNodelay) {button_set_clickble(0); clr=c_gray;}
                    if (button_outback(view_xview+view_wview-355+string_width("No wait: 0")/2,view_yview+yyh+string_height("A")/2,"No wait: "+string(iNowait),clr,c_dkgray,c_black,0)) {} button_set_clickble(1); yyh+=string_height(str)+4;}
                if (dDelay) {draw_set_font(Century16); clr=c_white; if (iNowait) {button_set_clickble(0); clr=c_gray;}
                    if (button_outback(view_xview+view_wview-355+string_width("No delay: 0")/2,view_yview+yyh+string_height("A")/2,"No delay: "+string(iNodelay),clr,c_dkgray,c_black,0)) {} button_set_clickble(1); yyh+=string_height(str)+4;}}}}
    if (o2side) {if (!cursor_under_button(view_xview+view_wview-10-350/2,view_yview+190+420/2,350,420)) {iSel=-1;}} if (otside) {dpressed=-1;} if (!ifDet || !endDet) {statRStart=-1; statReading=0;}
    if (tabSelected==5) {if (mouse_check_button_released(mb_middle)) {if (zoomHolding) {zoomHolding=0;}}
        if (mouse_check_button_pressed(mb_middle) &amp;&amp; global.btCl1) {dpressed52=-1; dpressed53=-1; dpressed5=-1; bttime=0; lstxz=x5zoff; lstyz=y5zoff; bfx=mouse_x; bfy=mouse_y;} if (mouse_check_button(mb_middle) &amp;&amp; global.btCl1) {
            if (mouse_x!=bfx||mouse_y!=bfy) {zoomHolding=1;} if (bttime&lt;8) {bttime+=1;} else {zoomHolding=1;}} else {bttime=0;}
        if (zoomHolding) {hmx=mouse_x-bfx; hmy=mouse_y-bfy; x5zoff=lstxz+hmx; y5zoff=lstyz+hmy;}
        if (mouse_wheel_down()) {y5zoff-=65;} if (mouse_wheel_up()) {y5zoff+=65;}
        if (mouse_check_button_pressed(mb_right)) {dpressed5=-1; dpressed52=-1; dpressed53=-1;}
        yyh=194; draw_text_set(Century20,c_white,fa_left,fa_top); draw_text_outline(view_xview+view_wview/2-150+x5zoff,view_yview+yyh+y5zoff,"var bool: "); yyh+=string_height("A")+6;
        otside=0; if (mouse_check_button_pressed(mb_left)) {otside=1;}
        draw_text_set(Century16,c_white,fa_left,fa_top); for (i=1;i&lt;=novdat.boolCount[novid];i+=1) {if (i&gt;novdat.boolCount[novid]) {exit;} draw_text_set(Century16,c_white,fa_left,fa_top);
            str="var bool"+string(i)+" = "+string(novdat.bool[novid,i]); clr=c_white; oclr=c_dkgray; if (dpressed5==i) {clr=c_red; oclr=c_black; str=lang.click_to_delete_me}
            if (cursor_under_button(view_xview+view_wview/2-300+x5zoff+string_width(str)/2,view_yview+yyh+y5zoff+string_height("A")/2,string_width(str),string_height("A"))) {
                if (mouse_check_button_pressed(mb_right) &amp;&amp; global.btCl1) {dpressed5=i;}}
            if (button_outback(view_xview+view_wview/2-300+x5zoff+string_width(str)/2,view_yview+yyh+y5zoff+string_height("A")/2,str,clr,oclr,c_black,1)) {
                if (dpressed5==i) {rlChan=1; FS_ini_open(FS_current_directory()+"\Novels\"+tpFolderName+"\"+tpFileName+".nsndat");
                    FS_ini_key_delete("EVENT:INIT","bool"+string(i));
                    for (ds=i+1;ds&lt;=novdat.boolCount[novid];ds+=1) {FS_ini_write_real("EVENT:INIT","bool"+string(ds-1),novdat.bool[novid,ds]); FS_ini_key_delete("EVENT:INIT","bool"+string(ds));
                        novdat.bool[novid,ds-1]=novdat.bool[novid,ds];} novdat.boolCount[novid]-=1; FS_ini_close();} else {dpressed5=-1;
                window_set_fullscreen(0); gts=get_string("Edit bool"+string(i)+" (0-1):",string(novdat.bool[novid,i])); if (string_digits(gts)!="") {if (real(gts)&lt;0) {gts=0;} if (real(gts)&gt;1) {gts=1;} FS_ini_open(FS_current_directory()+"\Novels\"+tpFolderName+"\"+tpFileName+".nsndat");
                FS_ini_write_real("EVENT:INIT","bool"+string(i),real(gts)); novdat.bool[novid,i]=real(gts);
            FS_ini_close();}}} yyh+=string_height("A")+4;}
        draw_text_set(Century20,c_white,fa_center,fa_top); if (button_outback(view_xview+view_wview/2-300+x5zoff+string_width(lang.add)/2+15,view_yview+yyh+y5zoff+string_height("A")/2,lang.add,c_white,c_dkgray,c_black,1)) {
            window_set_fullscreen(0); gts=get_string("New bool var (0-1):",""); if (string_digits(gts)!="") {rlChan=1; if (real(gts)&lt;0) {gts=0;} if (real(gts)&gt;1) {gts=1;} FS_ini_open(FS_current_directory()+"\Novels\"+tpFolderName+"\"+tpFileName+".nsndat");
                novdat.boolCount[novid]+=1; FS_ini_write_real("EVENT:INIT","bool"+string(novdat.boolCount[novid]),real(gts)); novdat.bool[novid,novdat.boolCount[novid]]=real(gts);
            FS_ini_close();}} yyh+=string_height("A")+6;
        draw_text_set(Century20,c_white,fa_left,fa_top); draw_text_outline(view_xview+view_wview/2-150+x5zoff,view_yview+yyh+y5zoff,"var integer: "); yyh+=string_height("A")+6; draw_text_set(Century16,c_white,fa_left,fa_top); for (i=1;i&lt;=novdat.integerCount[novid];i+=1) {draw_text_set(Century16,c_white,fa_left,fa_top);
            str="var integer"+string(i)+" = "+string(novdat.integer[novid,i]); clr=c_white; oclr=c_dkgray; if (dpressed52==i) {clr=c_red; oclr=c_black; str=lang.click_to_delete_me}
            if (cursor_under_button(view_xview+view_wview/2-300+x5zoff+string_width(str)/2,view_yview+yyh+y5zoff+string_height("A")/2,string_width(str),string_height("A"))) {
                if (mouse_check_button_pressed(mb_right) &amp;&amp; global.btCl1) {dpressed52=i;}}
            if (button_outback(view_xview+view_wview/2-300+x5zoff+string_width(str)/2,view_yview+yyh+y5zoff+string_height("A")/2,str,clr,oclr,c_black,1)) {
                if (dpressed52==i) {rlChan=1; FS_ini_open(FS_current_directory()+"\Novels\"+tpFolderName+"\"+tpFileName+".nsndat");
                    FS_ini_key_delete("EVENT:INIT","integer"+string(i));
                    for (ds=i+1;ds&lt;=novdat.integerCount[novid];ds+=1) {FS_ini_write_real("EVENT:INIT","integer"+string(ds-1),novdat.integer[novid,ds]); FS_ini_key_delete("EVENT:INIT","integer"+string(ds));
                        novdat.integer[novid,ds-1]=novdat.integer[novid,ds];} novdat.integerCount[novid]-=1; FS_ini_close();} else {dpressed52=-1;
                window_set_fullscreen(0); gts=get_string("Edit integer"+string(i)+" (0-1):",string(novdat.integer[novid,i])); if (string_digits(gts)!="") {FS_ini_open(FS_current_directory()+"\Novels\"+tpFolderName+"\"+tpFileName+".nsndat");
                FS_ini_write_real("EVENT:INIT","integer"+string(i),real(gts)); novdat.integer[novid,i]=real(gts);
            FS_ini_close();}}} yyh+=string_height("A")+4;}
        draw_text_set(Century20,c_white,fa_center,fa_top); if (button_outback(view_xview+view_wview/2-300+x5zoff+string_width(lang.add)/2+15,view_yview+yyh+y5zoff+string_height("A")/2,lang.add,c_white,c_dkgray,c_black,1)) {
            window_set_fullscreen(0); gts=get_string("New integer var:",""); if (string_digits(gts)!="") {rlChan=1; FS_ini_open(FS_current_directory()+"\Novels\"+tpFolderName+"\"+tpFileName+".nsndat");
                novdat.integerCount[novid]+=1; FS_ini_write_real("EVENT:INIT","integer"+string(novdat.integerCount[novid]),real(gts)); novdat.integer[novid,novdat.integerCount[novid]]=real(gts);
            FS_ini_close();}} yyh+=string_height("A")+6;
        draw_text_set(Century20,c_white,fa_left,fa_top); draw_text_outline(view_xview+view_wview/2-150+x5zoff,view_yview+yyh+y5zoff,"var string: "); yyh+=string_height("A")+6; draw_text_set(Century16,c_white,fa_left,fa_top); for (i=1;i&lt;=novdat.stringCount[novid];i+=1) {draw_text_set(Century16,c_white,fa_left,fa_top);
            str="var string"+string(i)+" = "+string(novdat.strng[novid,i]); clr=c_white; oclr=c_dkgray; if (dpressed53==i) {clr=c_red; oclr=c_black; str=lang.click_to_delete_me}
            if (cursor_under_button(view_xview+view_wview/2-300+x5zoff+string_width(str)/2,view_yview+yyh+y5zoff+string_height("A")/2,string_width(str),string_height("A"))) {
                if (mouse_check_button_pressed(mb_right) &amp;&amp; global.btCl1) {dpressed53=i;}}
            if (button_outback(view_xview+view_wview/2-300+x5zoff+string_width(str)/2,view_yview+yyh+y5zoff+string_height("A")/2,str,clr,oclr,c_black,1)) {
                if (dpressed53==i) {rlChan=1; FS_ini_open(FS_current_directory()+"\Novels\"+tpFolderName+"\"+tpFileName+".nsndat");
                    FS_ini_key_delete("EVENT:INIT","string"+string(i));
                    for (ds=i+1;ds&lt;=novdat.stringCount[novid];ds+=1) {FS_ini_write_string("EVENT:INIT","string"+string(ds-1),novdat.strng[novid,ds]); FS_ini_key_delete("EVENT:INIT","string"+string(ds));
                        novdat.strng[novid,ds-1]=novdat.strng[novid,ds];} novdat.stringCount[novid]-=1; FS_ini_close();} else {dpressed53=-1;
                window_set_fullscreen(0); gts=get_string("Edit string"+string(i)+" (0-1):",string(novdat.strng[novid,i])); if (string(gts)!="") {FS_ini_open(FS_current_directory()+"\Novels\"+tpFolderName+"\"+tpFileName+".nsndat");
                FS_ini_write_string("EVENT:INIT","string"+string(i),gts); novdat.strng[novid,i]=gts;
            FS_ini_close();}}} yyh+=string_height("A")+4;}
        if (otside) {dpressed5=-1; dpressed52=-1; dpressed53=-1;}
        draw_text_set(Century20,c_white,fa_center,fa_top); if (button_outback(view_xview+view_wview/2-300+x5zoff+string_width(lang.add)/2+15,view_yview+yyh+y5zoff+string_height("A")/2,lang.add,c_white,c_dkgray,c_black,1)) {
            window_set_fullscreen(0); gts=get_string("New string var:",""); if (string(gts)!="") {rlChan=1; FS_ini_open(FS_current_directory()+"\Novels\"+tpFolderName+"\"+tpFileName+".nsndat");
                novdat.stringCount[novid]+=1; FS_ini_write_string("EVENT:INIT","string"+string(novdat.stringCount[novid]),gts); novdat.strng[novid,novdat.stringCount[novid]]=gts;
            FS_ini_close();}} yyh+=string_height("A")+6;}
    
    /*if (tabSelected==0 &amp;&amp; scenarioOpened!=-1) {yyh=0; draw_text_set(Century16,c_white,fa_left,fa_top); for (i=-1;i&lt;=tpSLineCount;i+=1) {
        stanOff=2; if (i==-1) {stanOff=8;} else if (i==tpSLineCount-1) {stanOff=8;}
        if (i==-1) {draw_text_outline(view_xview+view_wview/2-320+xzoff,view_yview+175+yyh+yzoff,"НАЧАЛО"); yyh+=string_height("НАЧАЛО")+stanOff;}
        else if (i==-1) {draw_text_outline(view_xview+view_wview/2-320+xzoff,view_yview+175+yyh+yzoff,"КОНЕЦ"); yyh+=string_height("КОНЕЦ")+stanOff;} else {
        if (cursor_under_button(view_xview+view_wview/2-320+xzoff+string_width(tpSLine[i])/2,view_yview+175+yyh+yzoff,string_width(tpSLine[i]),string_height(tpSLine[i])+4)) {
            if (isHoverAdding!=-1) {if (mouse_check_button_released(mb_left)) {if (isHoverAdding==0) {gts=get_string("Реплика: ",""); if (gts!="") {
                }}} yyh+=string_height("A")+stanOff+2;}}
        draw_text_outline(view_xview+view_wview/2-320+xzoff,view_yview+175+yyh+yzoff,tpSLine[i]); yyh+=string_height(tpSLine[i])+stanOff;}}}*/
    
    draw_text_set(Pacifica28,c_white,fa_center,fa_top);
    yyh=300; if (tpFolderName!="") {if (tabSelected!=-1 &amp;&amp; tabSelected!=3 &amp;&amp; tabSelected!=5) {maxdef=166;} else {maxdef=124;} if (yrest&lt;maxdef) {yrest+=8; if (yrest&gt;maxdef) {yrest=maxdef;}} if (yrest&gt;maxdef) {yrest-=8; if (yrest&lt;maxdef) {yrest=maxdef;}}
    draw_set_alpha(((alpha*255)*0.376)/255); draw_rectangle_colour(view_xview,view_yview,view_xview+view_wview,view_yview+clamp(yrest,0,82),c_black,c_black,c_black,c_black,0);
    draw_rectangle_colour(view_xview,view_yview,view_xview+view_wview,view_yview+clamp(yrest,0,124),c_black,c_black,c_black,c_black,0);
    draw_rectangle_colour(view_xview,view_yview,view_xview+view_wview,view_yview+clamp(yrest,0,166),c_black,c_black,c_black,c_black,0); draw_set_alpha(alpha);
    draw_text_set(Century20,c_white,fa_left,fa_top); txt=lang.novel_creation; if (nEditing) {txt=lang.novel_editing;} draw_text_outline(view_xview+56,view_yview+7,txt);
    button_set_clickble(global.loggedIn); clr=c_white; if (!global.loggedIn) {clr=c_gray;} txt2=lang.upload_novel; if (novdat.prefix[objEditor.novid]!="") {txt2=lang.update_novel;}
    if (button_outback(view_xview+56+string_width(txt)+string_width(txt2)/2+56,view_yview+7+string_height("A")/2,txt2,clr,global.mButtonOutClr,c_black,0)) {
        instance_create(0,0,objEd_upload);} button_set_clickble(trTo==1);
    /*здесь был задник*/
    draw_text_set(Century20,c_white,fa_center,fa_top); if (button_outback(view_xview+view_wview-4-string_width(lang.information)/2,view_yview+82-4-string_height("A")/2,lang.information,global.mButtonClr,global.mButtonOutClr,c_black,0)) {if (instance_exists(aperson)) {aperson.dest=1;} lstSel=0; trTo=0;}
    draw_text_set(Century20,c_white,fa_center,fa_top); if (button_outback(view_xview+view_wview-string_width(lang.back_to_menu+" &gt;")/2-5,view_yview+4+string_height("A")/2,lang.back_to_menu+" &gt;",global.mButtonClr,global.mButtonOutClr,c_black,0)) {goToMenu=1;}
    draw_text_set(Century32,c_white,fa_left,fa_bottom); draw_text_outline(view_xview+4,view_yview+82,tpName); draw_text_set(Century20,c_white,fa_center,fa_top);
    if (tabSelected!=lstTSel) {zoomHolding=0; lstTSel=tabSelected;} if (tabSelected==3 || lstTSel==3) {
        draw_set_alpha(((alpha*255)*0.376)/255); draw_roundrect_colour(view_xview+view_wview/2-210,view_yview+view_hview/2-200,view_xview+view_wview/2+210,view_yview+view_hview/2+160,c_white,c_silver,0); draw_set_alpha(alpha);
        yyh=10; draw_text_set(Century32,c_white,fa_center,fa_top); draw_text_outline(view_xview+view_wview/2,view_yview+view_hview/2-190+yyh,lang.background); yyh+=string_height("A")+5; draw_text_set(Century20,c_white,fa_center,fa_middle);
        draw_set_alpha(((alpha*255)*0.376)/255); if (FS_file_exists(FS_current_directory()+"\Novels\"+tpFolderName+"\"+tpBack)) {if (sprite_exists(tpBSprite)) {bxscl=200/sprite_get_width(tpBSprite); byscl=200/sprite_get_height(tpBSprite);
            if (bxscl&gt;byscl) {byscl=bxscl;} else {bxscl=byscl;} draw_sprite_ext(tpBSprite,-1,view_xview+view_wview/2,view_yview+view_hview/2,bxscl,byscl,0,c_white,((alpha*255)*0.376)/255);}
        } else {draw_roundrect_colour(view_xview+view_wview/2-100,view_yview+view_hview/2-100,view_xview+view_wview/2+100,view_yview+view_hview/2+100,c_white,c_silver,0);} draw_set_alpha(alpha);
        if (button_outback(view_xview+view_wview/2,view_yview+view_hview/2,lang.change_background,global.mButtonClr,global.mButtonOutClr,c_black,0)) {
        file=get_open_filename("Image files|*.png;*.jpg", ""); if (file!="") {if (FS_file_exists(string(file))) {
            if (file!=FS_current_directory()+"\Novels\"+tpFolderName+"\"+tpBack) {rlChan=1;
            if (tpBack!="") {if (FS_file_exists(FS_current_directory()+"\Novels\"+tpFolderName+"\"+tpBack)) {if (sprite_exists(bSpr)) {sprite_delete(bSpr);}
                ns_file_delete(FS_current_directory()+"\Novels\"+tpFolderName+"\"+tpBack);}}
            if (!FS_directory_exists(FS_current_directory()+"\Novels\"+tpFolderName+"\")) {ns_directory_create(FS_current_directory()+"\Novels\"+tpFolderName+"\");}
            //fname=check_for_nonASCII(string(file)); isac=1; if (string(fname)!=string(file) &amp;&amp; fname!="") {notcen_add("E",lang.the_game_doesnt_support_nonascii); isac=0;}
            rfname=filename_name(file); ns_file_copy(file,FS_current_directory()+"\Novels\"+tpFolderName+"\"+rfname); tpBack=rfname;
            //FS_file_copy(file,FS_current_directory()+"\Novels\"+tpFolderName+"\"+rfname); tpBack=rfname;
            //FS_file_copy(string(file),"%appdata%\NovelSome\Temp\background."+ext);
            //file_copy(string(file),working_directory+"Temp\background."+ext); FS_file_copy("%appdata%\NovelSome\Temp\background."+ext,FS_current_directory()+"\Novels\"+tpFolderName+"\"+"background."+ext);
            //file_copy(string(file),FS_current_directory()+"\Novels\"+tpFolderName+"\"+"background."+ext);
            FS_ini_open(FS_current_directory()+"\Novels\"+tpFolderName+"\"+tpFileName+".nsndat");
            FS_ini_write_string("NOVELDATA","Background",tpBack); novdat.Background[novid]=tpBack;
            FS_ini_close();}}} mouse_clear(mb_left);}
        clr=c_red; oclr=c_dkgray; if (!FS_file_exists(FS_current_directory()+"\Novels\"+tpFolderName+"\"+tpBack)) {button_set_clickble(0); clr=c_gray;}
        if (button_outback(view_xview+view_wview/2,view_yview+view_hview/2+string_height("A")/2+115,lang.delete_background,clr,oclr,c_black,0)) {
            if (sprite_exists(tpBSprite)) {sprite_delete(tpBSprite); bSpr=global.menuBackgroundBlur;} if (tpBack!="") {rlChan=1;} tpBack=""; FS_ini_open(FS_current_directory()+"\Novels\"+tpFolderName+"\"+tpFileName+".nsndat");
            FS_ini_write_string("NOVELDATA","Background",tpBack); novdat.Background[novid]=tpBack; FS_ini_close();
            if (FS_file_exists(FS_current_directory()+"\Novels\"+tpFolderName+"\"+tpBack)) {file_delete(FS_current_directory()+"\Novels\"+tpFolderName+"\"+tpBack);}} if (clr==c_gray) {button_set_clickble(1);}}
    if (yrest&gt;124) {if (tabSelected==2 || lstTSel==2) {xxw=10; draw_text_set(Century20,c_white,fa_center,fa_top);
        if (button_outback(view_xview+xxw+string_width(lang.edit_packs)/2+15,view_yview+124+21,lang.edit_packs,c_white,c_dkgray,c_black,0)) {} xxw+=string_width(lang.edit_packs)+15;
        if (button_outback(view_xview+xxw+string_width(lang.export_as_pack)/2+15,view_yview+124+21,lang.export_as_pack,c_white,c_dkgray,c_black,0)) {} xxw+=string_width(lang.export_as_pack)+15;
        
        if (mouse_check_button_pressed(mb_right) || mouse_check_button_pressed(mb_middle)) {dprd1=-1; dprd2=-1;}
        draw_set_alpha(((alpha*255)*0.376)/255); draw_rectangle_colour(view_xview+10,view_yview+166+10,view_xview+320,view_yview+view_hview-10,c_black,c_black,c_black,c_black,0);
        draw_rectangle_colour(view_xview+10,view_yview+166+10,view_xview+320,view_yview+166+10+string_height("Доступные"),c_black,c_black,c_black,c_black,0); draw_set_alpha(alpha);
        yyh=166+10; draw_text_set(Century20,c_white,fa_center,fa_top); draw_text_outline(view_xview+320/2+10,view_yview+yyh,"Доступные"); yyh+=string_height("A")+4;
        draw_text_set(Century20,c_white,fa_left,fa_top); draw_text_outline(view_xview+15,view_yview+yyh+chzoom,"Основные"); yyh+=string_height("A")+4;
        draw_text_set(Century16,c_white,fa_left,fa_top); guessyy=((view_yview+view_hview-10)-(view_yview+166+10))/(string_height("A")+4);
        if (tpCharEnd&gt;=1) {for (i=1;i&lt;=tpCharEnd;i+=1) {if (chSel==i) {draw_set_alpha(((alpha*255)*0.376)/255);
            draw_rectangle_colour(view_xview+10,view_yview+2+yyh+chzoom,view_xview+320,view_yview+yyh+2+chzoom+string_height(novdat.dchar[novid,i]),c_white,c_white,c_white,c_white,0); draw_set_alpha(alpha);}
            if (cursor_under_button(view_xview+25+string_width(novdat.dchar[novid,i])/2,view_yview+yyh+chzoom+string_height(novdat.dchar[novid,i])/2,string_width(novdat.dchar[novid,i]),string_height(novdat.dchar[novid,i]))) {
                if (mouse_check_button_pressed(mb_right)) {dprd1=i; mouse_clear(mb_right);}
                if (global.debug) {draw_text_set(Century16,c_white,fa_left,fa_top); draw_text_outline(mouse_x+20,mouse_y+10,"charID (n): "+string(i)); draw_text_set(Century16,c_white,fa_left,fa_top);}}
            clr=c_white; txt=novdat.dchar[novid,i]; if (dprd1==i) {txt=lang.cant_delete; clr=c_gray;}
            if (button_outback(view_xview+25+string_width(txt)/2,view_yview+yyh+chzoom+string_height(txt)/2,txt,clr,c_dkgray,c_black,0)) {
                dprd1=-1; if (chSel!=i) {stSel=0; tpStName=""; if (novdat.states[novid,i]&gt;0) {stSel=1; lstSel=0;}} chSel=i;} yyh+=string_height("A")+4;}}
        for (i=0;i&lt;1;i+=1) {if (tpPackStart[i]&lt;=tpCharCount) {draw_text_set(Century16,c_white,fa_left,fa_top); for (ii=tpPackStart[i];ii&lt;tpPackEnd[i];ii+=1) {
                if (!novdat.cdeleted[novid,ii]) {if (chSel==ii) {draw_set_alpha(((alpha*255)*0.376)/255);
                draw_rectangle_colour(view_xview+10,view_yview+2+yyh+chzoom,view_xview+320,view_yview+yyh+chzoom+2+string_height(novdat.dchar[novid,ii]),c_white,c_white,c_white,c_white,0); draw_set_alpha(alpha);}
                if (cursor_under_button(view_xview+25+string_width(novdat.dchar[novid,ii])/2,view_yview+yyh+chzoom+string_height(novdat.dchar[novid,ii])/2,string_width(novdat.dchar[novid,ii]),string_height(novdat.dchar[novid,ii]))) {
                    if (mouse_check_button_pressed(mb_right)) {dprd1=ii; mouse_clear(mb_right);}
                    if (global.debug) {draw_text_set(Century16,c_white,fa_left,fa_top); draw_text_outline(mouse_x+20,mouse_y+10,"charID (l): "+string(ii)); draw_text_set(Century16,c_white,fa_left,fa_top);}}
                clr=c_white; txt=novdat.dchar[novid,ii]; if (dprd1==ii) {txt=lang.delete_me; clr=c_red;}
                if (button_outback(view_xview+25+string_width(txt)/2,view_yview+yyh+chzoom+string_height(txt)/2,txt,clr,c_dkgray,c_black,0)) {
                    if (dprd1==ii) {dprd1=-1; rlChan=1; file=FS_file_text_open_write(novdat.charf[novid,ii]); FS_file_text_write_string(file,"DELETED");
                    FS_file_text_close(file); FS_file_delete(novdat.charf[novid,ii]); novdat.cdeleted[novid,ii]=1; if (chSel==ii) {chSel=0; stSel=0;}}
                    else {if (chSel!=ii) {stSel=0; tpStName=""; if (novdat.states[novid,ii]&gt;0) {stSel=1; lstSel=0;}} chSel=ii;}} yyh+=string_height("A")+4;}}}}
        draw_text_set(Century16,c_white,fa_left,fa_top); if (chSel==0) {draw_set_alpha(((alpha*255)*0.376)/255);
            draw_rectangle_colour(view_xview+10,view_yview+2+yyh+chzoom,view_xview+320,view_yview+yyh+chzoom+2+string_height("+"+lang.add),c_white,c_white,c_white,c_white,0); draw_set_alpha(alpha);}
        if (button_outback(view_xview+25+string_width("+"+lang.add)/2,view_yview+yyh+chzoom+string_height("+"+lang.add)/2,"+"+lang.add,c_lime,c_dkgray,c_black,0)) {tpCName=""; tpCName_r=""; chSel=0; stSel=0;} yyh+=string_height("A")+5;
        if (chPackCount&gt;1) {for (i=1;i&lt;chPackCount;i+=1) {draw_text_set(Century20,c_white,fa_left,fa_top); draw_text_outline(view_xview+15,view_yview+yyh+chzoom,chAPack[i]); yyh+=string_height("A")+4;
            if (tpPackStart[i]&lt;=tpCharCount) {draw_text_set(Century16,c_white,fa_left,fa_top); for (ii=tpPackStart[i];ii&lt;tpPackEnd[i];ii+=1) {if (chSel==ii) {draw_set_alpha(((alpha*255)*0.376)/255);
                draw_rectangle_colour(view_xview+10,view_yview+2+yyh+chzoom,view_xview+320,view_yview+yyh+chzoom+2+string_height(novdat.dchar[novid,i]),c_white,c_white,c_white,c_white,0); draw_set_alpha(alpha);}
                if (cursor_under_button(view_xview+25+string_width(novdat.dchar[novid,ii])/2,view_yview+yyh+chzoom+string_height(novdat.dchar[novid,ii])/2,string_width(novdat.dchar[novid,ii]),string_height(novdat.dchar[novid,ii]))) {
                    if (mouse_check_button_pressed(mb_right)) {dprd1=ii; mouse_clear(mb_right);}
                    if (global.debug) {draw_text_set(Century16,c_white,fa_left,fa_top); draw_text_outline(mouse_x+20,mouse_y+10,"charID: "+string(ii)+" from packID: "+string(i)); draw_text_set(Century16,c_white,fa_left,fa_top);}}
                clr=c_white; txt=novdat.dchar[novid,ii]; if (dprd1==ii) {txt=lang.cant_delete; clr=c_gray;}
                if (button_outback(view_xview+25+string_width(txt)/2,view_yview+yyh+chzoom+string_height(txt)/2,txt,clr,c_dkgray,c_black,0)) {
                    dprd1=-1; if (chSel!=ii) {stSel=0; tpStName=""; if (novdat.states[novid,ii]&gt;0) {stSel=1; lstSel=0;}} chSel=ii;} yyh+=string_height("A")+4;}}}} chmzoom=1; if (yyh&gt;=view_hview-10) {chmzoom=yyh-view_hview+10;}
        if (cursor_under_button(view_xview+320/2+10,view_yview+166+10+((view_yview+view_hview-10)-(view_yview+166+10))/2,320,(view_yview+view_hview-10)-(view_yview+166+10)) &amp;&amp; global.btCl1) {if (mouse_wheel_up()) {chzoom+=55;} if (mouse_wheel_down()) {chzoom-=55;}}
        if (chzoom&lt;-chmzoom) {chzoom=-chmzoom;} if (chzoom&gt;0) {chzoom=0;}
        draw_set_alpha(alpha/1.6); draw_rectangle_colour(view_xview+320+20,view_yview+166+10,view_xview+320,view_yview+view_hview-10,
        c_black,c_black,c_black,c_black,0); draw_set_alpha(((alpha*255)*0.376)/255); ypreoff=((view_yview+view_hview-10)-(view_yview+166+10)-85)*abs((chzoom)/((chmzoom)));
        draw_rectangle_colour(view_xview+320+20,view_yview+166+10+ypreoff,view_xview+320,view_yview+166+10+ypreoff+85,c_white,c_white,c_white,c_white,0); draw_set_alpha(alpha);
        
        if (chSel&gt;0 &amp;&amp; chSel&lt;=tpCharCount) {draw_set_alpha(((alpha*255)*0.376)/255); draw_rectangle_colour(view_xview+320+20+15,view_yview+166+10,view_xview+view_wview-15,view_yview+view_hview-10,c_black,c_black,c_black,c_black,0);
        draw_text_set(Century20,c_white,fa_center,fa_top); draw_rectangle_colour(view_xview+320+20+15,view_yview+166+10,view_xview+view_wview-15,view_yview+166+10+string_height("Информация"),c_black,c_black,c_black,c_black,0); draw_set_alpha(alpha); 
        yyh=166+10; draw_text_outline(view_xview+320+20+15+((view_xview+view_wview-15)-(view_xview+320+20+15))/2,view_yview+yyh,"Информация"); yyh+=string_height("A")+4; adstr=""; if (novdat.dchar[novid,chSel]!=novdat.char[novid,chSel]) {adstr=" ("+novdat.char[novid,chSel]+")";}
        draw_text_set(Century20,c_white,fa_left,fa_top); draw_text_outline(view_xview+320+20+15+5,view_yview+yyh,"Имя: ");
        clr=c_white; if (novdat.cpack[novid,chSel]) {clr=c_ltgray; button_set_clickble(0);}
        if (button_outback(view_xview+320+20+15+5+string_width("Имя: ")+string_width(string(novdat.dchar[novid,chSel])+adstr)/2,view_yview+yyh+string_height(string(novdat.dchar[novid,chSel])+adstr)/2,string(novdat.dchar[novid,chSel])+adstr,clr,c_dkgray,c_black,0)) {
            if (!instance_exists(objEd_nameWarn)) {instance_create(0,0,objEd_nameWarn);} mouse_clear(mb_left);} if (novdat.cpack[novid,chSel]) {button_set_clickble(1);}
        draw_text_set(Century20,c_white,fa_left,fa_top); yyh+=string_height("A");
        draw_rectangle_colour(view_xview+320+20+15+5+string_width("Основной цвет: "),view_yview+yyh+5,view_xview+320+20+15+5+string_width("Основной цвет: ")+35,view_yview+yyh+string_height("A")-5,novdat.charclr[novid,chSel],novdat.charclr[novid,chSel],novdat.charclr[novid,chSel],novdat.charclr[novid,chSel],0);
        draw_text_outline(view_xview+320+20+15+5,view_yview+yyh,"Основной цвет: "); xad=320+20+15+5+string_width("Основной цвет: ")+35+10;
        draw_rectangle_colour(view_xview+xad+string_width("Дополнительный цвет: "),view_yview+yyh+5,view_xview+xad+string_width("Дополнительный цвет: ")+35,view_yview+yyh+string_height("A")-5,novdat.charoutclr[novid,chSel],novdat.charoutclr[novid,chSel],novdat.charoutclr[novid,chSel],novdat.charoutclr[novid,chSel],0);
        draw_text_outline(view_xview+xad,view_yview+yyh,"Дополнительный цвет: "); yyh+=string_height("A")+4; draw_set_alpha(((alpha*255)*0.376)/255);
        draw_text_set(Century20,c_white,fa_center,fa_top); draw_rectangle_colour(view_xview+320+20+15,view_yview+yyh,view_xview+view_wview-15,view_yview+yyh+string_height("Спрайты"),c_black,c_black,c_black,c_black,0);
        draw_set_alpha(alpha); draw_text_outline(view_xview+320+20+15+((view_xview+view_wview-15)-(view_xview+320+20+15))/2,view_yview+yyh,"Спрайты"); yyh+=string_height("A");
        
        yyh+=12; xad=320+20+15+10; draw_set_alpha(((alpha*255)*0.376)/255); draw_rectangle_colour(view_xview+xad,view_yview+yyh,view_xview+xad+240,view_yview+view_hview-20,c_black,c_black,c_black,c_black,0);
        if (cursor_under_button(view_xview+xad+240/2,view_yview+yyh+((view_yview+view_hview-20)-(view_yview+yyh))/2,240,(view_yview+view_hview-20)-(view_yview+yyh)) &amp;&amp; global.btCl1) {if (mouse_wheel_up()) {stzoom+=55;} if (mouse_wheel_down()) {stzoom-=55;}}
        if (stzoom&lt;-stmzoom) {stzoom=-stmzoom;} if (stzoom&gt;0) {stzoom=0;}
        draw_set_alpha(alpha/1.6); draw_rectangle_colour(view_xview+xad+240+20,view_yview+yyh,view_xview+xad+240,view_yview+view_hview-20,
        c_black,c_black,c_black,c_black,0); draw_set_alpha(((alpha*255)*0.376)/255); ypreoff=((view_yview+view_hview-20)-(view_yview+yyh)-85)*abs((stzoom)/((stmzoom)));
        draw_rectangle_colour(view_xview+xad+240+20,view_yview+yyh+ypreoff,view_xview+xad+240,view_yview+yyh+ypreoff+85,c_white,c_white,c_white,c_white,0);
            draw_rectangle_colour(view_xview+xad,view_yview+yyh,view_xview+xad+240,view_yview+yyh+string_height("Состояния"),c_black,c_black,c_black,c_black,0); draw_set_alpha(alpha);
        if (stSel&gt;0 &amp;&amp; stSel&lt;=novdat.states[novid,chSel]) {draw_text_set(Century16,c_white,fa_left,fa_top);
        syh=yyh-6; nxad=xad+240+20+10; draw_text_outline(view_xview+nxad,view_yview+syh,"Название: ");
        clr=c_white; if (novdat.charf[novid,chSel]=="" || novdat.cpack[novid,chSel]) {clr=c_ltgray; button_set_clickble(0);}
        if (button_outback(view_xview+nxad+string_width("Название: ")+string_width(string(novdat.state[chSel,stSel]))/2,view_yview+syh+string_height(string(novdat.state[chSel,stSel]))/2,string(novdat.state[chSel,stSel]),clr,c_dkgray,c_black,0)) {
            if (!instance_exists(objEd_stateWarn)) {instance_create(0,0,objEd_stateWarn);} mouse_clear(mb_left);} if (novdat.charf[novid,chSel]=="" || novdat.cpack[novid,chSel]) {button_set_clickble(1);} syh+=string_height(novdat.state[chSel,stSel]);
        draw_text_set(Century20,c_white,fa_center,fa_middle); draw_set_alpha(((alpha*255)*0.376)/255); strhed=string_height(lang.edit); draw_rectangle_colour(view_xview+nxad,view_yview+syh,view_xview+view_wview-25,view_yview+view_hview-20-strhed,c_black,c_black,c_black,c_black,0);
        draw_set_font(Arial12); clr=make_colour_rgb(81,182,255); draw_rectangle_colour(view_xview+nxad+1,view_yview+syh+string_height("NovelSome"),view_xview+view_wview-26,view_yview+view_hview-20-strhed-1,clr,clr,clr,clr,0); draw_set_alpha(alpha);
        draw_text_set(Arial12,c_white,fa_left,fa_top); draw_text_outline(view_xview+nxad+5,view_yview+syh,"NovelSome");
        clr=c_red; if (cursor_under_button(view_xview+view_wview-25-28/2,view_yview+syh+string_height("NovelSome")/2,28,string_height("NovelSome")) &amp;&amp; global.btCl1) {clr=color_get_darkest(clr);}
        draw_rectangle_colour(view_xview+view_wview-25,view_yview+syh,view_xview+view_wview-25-28,view_yview+syh+string_height("NovelSome"),clr,clr,clr,clr,0);
        clr=c_ltgray; if (cursor_under_button(view_xview+view_wview-25-28-1-28/2,view_yview+syh+string_height("NovelSome")/2,28,string_height("NovelSome")) &amp;&amp; global.btCl1) {clr=color_get_darkest(clr);}
        draw_rectangle_colour(view_xview+view_wview-25-28-1,view_yview+syh,view_xview+view_wview-25-28-28-1,view_yview+syh+string_height("NovelSome"),clr,clr,clr,clr,0);
        clr=c_ltgray; if (cursor_under_button(view_xview+view_wview-25-28-1-28-1-28/2,view_yview+syh+string_height("NovelSome")/2,28,string_height("NovelSome")) &amp;&amp; global.btCl1) {clr=color_get_darkest(clr);}
        draw_rectangle_colour(view_xview+view_wview-25-28-1-28-1,view_yview+syh,view_xview+view_wview-25-28-28-1-28-1,view_yview+syh+string_height("NovelSome"),clr,clr,clr,clr,0);
        draw_text_set(Century20,c_white,fa_center,fa_middle); txt=lang.edit; if (novdat.cpack[novid,chSel]) {txt=lang.watch;}
        if (button_outback(view_xview+nxad+((view_xview+view_wview-25)-(view_xview+nxad))/2,view_yview+view_hview-20-string_height(txt)/2,txt,c_white,c_dkgray,c_black,0)) {
            if (novdat.cpack[novid,chSel]) {if (!instance_exists(objEd_photowatch)) {instance_create(0,0,objEd_photowatch);}} else {if (!instance_exists(objEd_photoshop)) {instance_create(0,0,objEd_photoshop);}}}
        if (!instance_exists(aperson)) {draw_text_outline(view_xview+nxad+((view_xview+view_wview-25)-(view_xview+nxad))/2,view_yview+syh+((view_yview+view_hview-20-string_height(lang.edit))-(view_yview+syh))/2,"Нет изображения");}
        else {if (novdat.charf[novid,chSel]!="") {if (aperson.acount&lt;=0) {draw_text_outline(view_xview+nxad+((view_xview+view_wview-25)-(view_xview+nxad))/2,view_yview+syh+((view_yview+view_hview-20-string_height(lang.edit))-(view_yview+syh))/2,"Нет изображения");}}}
        
        } else {if (novdat.charf[novid,chSel]!="" &amp;&amp; !novdat.cpack[novid,chSel]) {draw_text_set(Century16,c_white,fa_left,fa_top); syh=yyh-5; nxad=xad+240+20+10; draw_text_outline(view_xview+nxad,view_yview+syh,"Название: ");
        _name=tpStName; clr=c_white; if (tpStName=="") {clr=c_red; _name="Укажите здесь название";} if (tpStName=="*") {clr=c_red; _name="Такое состояние уже существует";}
        if (button_outback(view_xview+nxad+string_width("Название: ")+string_width(_name)/2,view_yview+syh+string_height(_name)/2,_name,clr,c_dkgray,c_black,0)) {if (tpStName=="*") {tpStName="";} gts=get_string("Укажите здесь название",tpStName);
            if (gts!="") {tpStName=gts; str=check_for_folder_availablen(tpStName); if (str!="") {tpStName=str;} for (i=1;i&lt;=novdat.states[novid,chSel];i+=1) {
                if (novdat.state[chSel,i]==tpStName &amp;&amp; i!=stSel) {tpStName="*";}}}} syh+=string_height("A")+3;
        draw_text_set(Century20,c_white,fa_center,fa_top); if (button_outback(view_xview+nxad+((view_xview+view_wview-15)-(view_xview+nxad))/2,view_yview+syh+string_height(lang.scontinue)/2,lang.scontinue,c_lime,c_dkgray,c_black,0)) {
            if (tpStName!="*" &amp;&amp; tpStName!="") {rlChan=1; novdat.states[novid,chSel]+=1; novdat.state[chSel,novdat.states[novid,chSel]]=tpStName; stSel=novdat.states[novid,chSel];
                file=FS_file_text_open_append(novdat.charf[novid,chSel]); FS_file_text_writeln(file); FS_file_text_write_string(file,"sprite "+string(tpStName));
                FS_file_text_writeln(file); FS_file_text_write_string(file,"end"); FS_file_text_close(file);}}}}
        
        draw_text_set(Century20,c_white,fa_center,fa_top); draw_text_outline(view_xview+xad+240/2,view_yview+yyh,"Состояния"); yyh+=string_height("Состояния");
        draw_text_set(Century16,c_white,fa_left,fa_top); for (i=1;i&lt;=novdat.states[novid,chSel];i+=1) {if (stSel==i) {draw_set_alpha(((alpha*255)*0.376)/255);
            draw_rectangle_colour(view_xview+xad,view_yview+2+yyh+stzoom,view_xview+xad+240,view_yview+yyh+stzoom+2+string_height(novdat.state[chSel,i]),c_white,c_white,c_white,c_white,0); draw_set_alpha(alpha);}
            if (cursor_under_button(view_xview+xad+5+string_width(novdat.state[chSel,i])/2,view_yview+yyh+stzoom+string_height(novdat.state[chSel,i])/2,string_width(novdat.state[chSel,i]),string_height(novdat.state[chSel,i]))) {
                if (mouse_check_button_pressed(mb_right)) {dprd2=i; mouse_clear(mb_right);}}
            clr=c_white; txt=novdat.state[chSel,i]; if (dprd2==i) {if (novdat.charf[novid,chSel]!="") {clr=c_red; txt=lang.delete_me;} else {clr=c_gray; txt=lang.cant_delete;}}
            if (button_outback(view_xview+xad+5+string_width(txt)/2,view_yview+yyh+stzoom+string_height(txt)/2,txt,clr,c_dkgray,c_black,0)) {
                if (dprd2==i &amp;&amp; novdat.charf[novid,chSel]!="" &amp;&amp; !novdat.cpack[novid,chSel]) {rlChan=1; dprd2=-1; FS_file_copy(novdat.charf[novid,chSel],novdat.charf[novid,chSel]+".bak");
                    file=FS_file_text_open_read(novdat.charf[novid,chSel]); lncount=0; while (!FS_file_text_eof(file)) {line[lncount]=FS_file_text_read_string(file); FS_file_text_readln(file); lncount+=1;}
                    FS_file_text_close(file); FS_file_delete(novdat.charf[novid,chSel]); file=FS_file_text_open_write(novdat.charf[novid,chSel]);
                    crl=0; stReading=0; repeat (lncount) {_ph=""; if (string_copy(line[crl],1,string_length(" "))==" ") {blnum=""; bldef=""; num="_"; _count=1; while (num!="") {_ph=string_copy(line[crl],1,_count);
                            if (string_copy(_ph,string_length(_ph),1)!=" ") {_ph=string_copy(_ph,1,string_length(_ph)-1); num="";} else {_count+=1; if (_count&gt;=global.maxSpaceCount) {break;}}}
                            if (_ph!="") {line[crl]=string_copy(line[crl],string_length(_ph)+1,string_length(line[crl])-string_length(_ph));}}
                        if (line[crl]=="sprite "+novdat.state[chSel,i]) {stReading=1;}
                        else if (string_copy(line[crl],1,string_length("sprite "))=="sprite ") {FS_file_text_write_string(file,_ph+line[crl]); stReading=0;}
                        else if (string_copy(line[crl],1,string_length("end"))=="end") {if (!stReading) {FS_file_text_write_string(file,_ph+line[crl]);} stReading=0;}
                        else {if (!stReading) {FS_file_text_write_string(file,_ph+line[crl]);}} if (!stReading) {FS_file_text_writeln(file);} crl+=1;} FS_file_text_close(file);
                    if (stSel==i) {stSel=0;} for (ii=i;ii&lt;novdat.states[novid,chSel];ii+=1) {novdat.state[chSel,ii]=novdat.state[chSel,ii+1];} novdat.states[novid,chSel]-=1;}
                else {dprd2=-1; stSel=i;}} yyh+=string_height("A")+4;}
        if (stSel==0) {draw_set_alpha(((alpha*255)*0.376)/255); draw_rectangle_colour(view_xview+xad,view_yview+2+yyh+stzoom,view_xview+xad+240,view_yview+yyh+stzoom+2+string_height("+"+lang.add),c_white,c_white,c_white,c_white,0); draw_set_alpha(alpha);}
        if (novdat.charf[novid,chSel]!="") {txt="+"+lang.add; clr=c_lime;} else {txt=lang.empty; clr=c_gray; button_set_clickble(0);} if (novdat.cpack[novid,chSel]) {txt=lang.empty; clr=c_gray; button_set_clickble(0);}
        if (button_outback(view_xview+xad+5+string_width(txt)/2,view_yview+yyh+stzoom+string_height(txt)/2,txt,clr,c_dkgray,c_black,0)) {tpStName=""; stSel=0;}
        if (novdat.charf[novid,chSel]=="") {button_set_clickble(1);} if (novdat.cpack[novid,chSel]) {button_set_clickble(1);} stmzoom=1; if (yyh&gt;=view_hview-20) {stmzoom=yyh-view_hview;}
        
        } else {
        
        draw_set_alpha(((alpha*255)*0.376)/255); draw_rectangle_colour(view_xview+320+20+15,view_yview+166+10,view_xview+view_wview-15,view_yview+view_hview-10,c_black,c_black,c_black,c_black,0);
        draw_text_set(Century20,c_white,fa_center,fa_top); draw_rectangle_colour(view_xview+320+20+15,view_yview+166+10,view_xview+view_wview-15,view_yview+166+10+string_height("Информация"),c_black,c_black,c_black,c_black,0); draw_set_alpha(alpha); 
        yyh=166+10; draw_text_outline(view_xview+320+20+15+((view_xview+view_wview-15)-(view_xview+320+20+15))/2,view_yview+yyh,"Создание персонажа"); yyh+=string_height("A")+4;
        draw_text_set(Century20,c_white,fa_left,fa_top); draw_text_outline(view_xview+320+20+15+5,view_yview+yyh,"Имя: ");
        draw_text_set(Century20,c_white,fa_left,fa_top); _name=tpCName; clr=c_white; if (tpCName=="") {_name="Укажите здесь имя"; clr=c_red;} if (tpCName_r!="") {if (tpCName_r!=tpCName) {_name+=" ("+tpCName_r+")";}}
        if (button_outback(view_xview+320+20+15+5+string_width("Имя: ")+string_width(_name)/2,view_yview+yyh+string_height(_name)/2,_name,clr,c_dkgray,c_black,0)) {gts=get_string("Укажите здесь имя",tpCName);
            if (gts!="") {tpCName=gts; tpCName_r=tpCName; str=check_for_folder_availablen(tpCName_r); if (str!="") {tpCName_r=str;} pStr=tpCName_r;
            rnum=0; if (tpCharEnd&gt;=1) {for (i=1;i&lt;=tpCharEnd;i+=1) {//if (novdat.char[novid,i]==pStr &amp;&amp; rnum==0) {tpCName_r=tpCName+"2"; pStr=tpCName_r;}
                 if (string_copy(novdat.char[novid,i],1,string_length(pStr))==pStr) {if (string_length(novdat.char[novid,i])&gt;string_length(pStr)) {
                num=string_get_snumber(novdat.char[novid,i],string_length(pStr)+1); if (num!="") {if (real(num)&gt;=rnum) {tpCName_r=tpCName+string(real(num)+1); pStr=tpCName_r; rnum=real(num)+1;}} else {/*tpCName_r=tpCName+"2"; pStr=tpCName_r;*/}} else {tpCName_r=tpCName+"2"; pStr=tpCName_r;}}}}
            for (i=0;i&lt;1;i+=1) {if (tpPackStart[i]&lt;=tpCharCount) {for (ii=tpPackStart[i];ii&lt;tpPackEnd[i];ii+=1) {//if (novdat.char[novid,ii]==pStr &amp;&amp; rnum==0) {tpCName_r=tpCName+"2"; pStr=tpCName_r; rnum=2;}
                if (string_copy(novdat.char[novid,ii],1,string_length(pStr))==pStr) {if (string_length(novdat.char[novid,ii])&gt;string_length(pStr)) {
                num=string_get_snumber(novdat.char[novid,ii],string_length(pStr)+1); if (num!="") {show_debug_message(num); if (real(num)&gt;=rnum) {tpCName_r=tpCName+string(real(num)+1); pStr=tpCName_r; rnum=real(num)+1;}} else {/*tpCName_r=tpCName+"2"; pStr=tpCName_r;*/}} else {tpCName_r=tpCName+"2"; pStr=tpCName_r;}}}}}}} yyh+=string_height("A")+3;
        //if (tpCName_r!="") {draw_set_halign(fa_center); draw_text_outline(view_xview+320+20+15+5+40+string_width(_name)/2,view_yview+yyh,"("+tpCName_r+")"); yyh+=string_height("A")+3;}
        draw_text_set(Century20,c_white,fa_center,fa_top); if (button_outback(view_xview+320+20+15+((view_xview+view_wview-15)-(view_xview+320+20+15))/2,view_yview+yyh+string_height("A")/2,lang.scontinue,c_lime,c_dkgray,c_black,0)) {
            if (tpCName!="" &amp;&amp; tpCName_r!="") {rlChan=1; file=FS_file_text_open_write(FS_current_directory()+"\Novels\"+tpFolderName+"\"+tpCName_r+".nschar");
                FS_file_text_write_string(file,"name "+string(tpCName_r)); FS_file_text_writeln(file);
                FS_file_text_write_string(file,"dname "+string(tpCName)); FS_file_text_close(file); novdat.charCount[novid]+=1; tpCharCount+=1; chid=novdat.charCount[novid];
                char_imitate_blank_nolist(novid,chid); novdat.charf[novid,chid]=FS_current_directory()+"\Novels\"+tpFolderName+"\"+tpCName_r+".nschar";
                novdat.char[novid,chid]=tpCName_r; novdat.dchar[novid,chid]=tpCName; chSel=chid; if (tpPackStart[0]==0) {tpPackStart[0]=chid; tpPackEnd[0]=chid+1;} else {tpPackEnd[0]+=1;}}}}
        if (mouse_check_button_pressed(mb_left)) {dprd1=-1; dprd2=-1;}
        
        if (lstSel!=stSel &amp;&amp; trTo==1) {if (instance_exists(aperson)) {with (aperson) {instance_destroy();}} if (stSel==0) {lstSel=stSel;}
            else {_img=""; chnum=chSel; cuscdist="normal"; dist=novdat.state[chSel,stSel];
                if (novdat.charf[novid,real(chnum)]=="") {_img=FS_current_directory()+"\"+novdat.FolName[novid]+"\"+novdat.charimg[novid,real(chnum)]; if (dist=='normal' ||(dist=='custom' &amp;&amp; cuscdist=='normal')) {
                _img=FS_current_directory()+"\"+novdat.FolName[novid]+"\"+novdat.charimg_normal[novid,real(chnum)];}
                else if (dist=='far' ||(dist=='custom' &amp;&amp; cuscdist=='far')) {_img=FS_current_directory()+"\"+novdat.FolName[novid]+"\"+novdat.charimg_far[novid,real(chnum)];}
                else if (dist=='close' ||(dist=='custom' &amp;&amp; cuscdist=='close')) {_img=FS_current_directory()+"\"+novdat.FolName[novid]+"\"+novdat.charimg_close[novid,real(chnum)];}}
            cp=0; if (novdat.charf[novid,real(chnum)]!="") {cp=1;} if (novdat.charf[novid,real(chnum)]=="" &amp;&amp; string_length(_img)&gt;string_length(FS_current_directory()+"\"+novdat.FolName[novid]+"\")) {cp=1;}
            if (cp) {aperson=person_create(_img,chSel,"center",dist,1,1,0,dist); draw_set_font(Century20);
                //aperson.real_hview=((view_yview+view_hview-20-string_height(lang.edit))-(view_yview+syh));
                aperson.real_hview=1280*(((view_yview+view_hview-20-string_height(lang.edit))-(view_yview+syh))/((view_xview+view_wview-25)-(view_xview+nxad)));
                aperson.cuscale=((view_xview+view_wview-25)-(view_xview+nxad))/1280; //1280
                if (((view_yview+view_hview-20-string_height(lang.edit))-(view_yview+syh))&gt;((view_xview+view_wview-25)-(view_xview+nxad))) {
                    aperson.cuscale=((view_yview+view_hview-20-string_height(lang.edit))-(view_yview+syh))/aperson.real_hview;}
                aperson.dox=view_xview+nxad+((view_xview+view_wview-25)-(view_xview+nxad))/2-view_wview/2; aperson.doy=-20-string_height(lang.edit);} lstSel=stSel;}}
        
        } else {if (instance_exists(aperson)) {with (aperson) {instance_destroy();}} lstSel=0;}
    if (tabSelected==0 || lstTSel==0) {xxw=10; draw_text_set(Century20,c_white,fa_center,fa_top);
        if (button_outback(view_xview+xxw+string_width(lang.new)/2+15,view_yview+124+21,lang.new,c_white,c_dkgray,c_black,0)) {
            file=get_save_filename_ext("Scenario files|*.nsdat",tpScenario,FS_current_directory()+"\Novels\"+tpFolderName+"\","Scenario creating"); if (file!="") {
            if (string_copy(file,1,string_length(FS_current_directory()+"\Novels\"+tpFolderName+"\"))!=FS_current_directory()+"\Novels\"+tpFolderName+"\") {notcen_add("E",lang.cant_save_not_it_foldername);} else {
            /*fname=check_for_nonASCII(string(file));*/fname=""; if (string(fname)!=string(file) &amp;&amp; fname!="") {notcen_add("E",lang.the_game_doesnt_support_nonascii);} else {
                tpScenario=filename_name(file); scenarioOpened=1; xzoff=0; yzoff=0; sChanged=0; editor_create_scenario(FS_current_directory()+"\Novels\"+tpFolderName+"\"+tpScenario);
                /*editor_load_scenario(FS_current_directory()+"\Novels\"+tpFolderName+"\"+tpScenario);*/ if (FS_file_exists(FS_current_directory()+"\Novels\"+tpFolderName+"\"+tpScenario)) {
                    if (mScenario=="") {rlChan=1; FS_ini_open(FS_current_directory()+"\Novels\"+tpFolderName+"\"+tpFileName+".nsndat");
                    FS_ini_write_string("EVENT:START","scenario",tpScenario); novdat.scenario[novid]=tpScenario; novdat.Color[novid]=tpColor; novdat.OutColor[novid]=tpOutColor;
                    FS_ini_close(); novdat.isActive[novid]=1; mScenario=tpScenario;}}}}}} xxw+=string_width(lang.new)+15;
        if (button_outback(view_xview+xxw+string_width(lang.open)/2+15,view_yview+124+21,lang.open,c_white,c_dkgray,c_black,0)) {
            file=get_open_filename_ext("Scenario files|*.nsdat",tpScenario,FS_current_directory()+"\Novels\"+tpFolderName+"\","Scenario selection"); if (file!="") {if (FS_file_exists(string(file))) {
                if (!FS_directory_exists(FS_current_directory()+"\Novels\"+tpFolderName+"\")) {ns_directory_create(FS_current_directory()+"\Novels\"+tpFolderName+"\");}
                /*fname=check_for_nonASCII(string(file));*/fname=""; if (string(fname)!=string(file) &amp;&amp; fname!="") {notcen_add("E",lang.the_game_doesnt_support_nonascii); exit;}
                else {tpScenarioCount+=1;} scenarioOpened=1; novdat.isActive[novid]=1; fname=filename_name(file); ns_file_copy(string(file),FS_current_directory()+"\Novels\"+tpFolderName+"\"+fname); tpScenario=fname;
                xzoff=0; yzoff=0; sChanged=0; editor_load_scenario(FS_current_directory()+"\Novels\"+tpFolderName+"\"+fname);
                if (FS_file_exists(FS_current_directory()+"\Novels\"+tpFolderName+"\"+tpScenario)) {
                    if (mScenario=="") {rlChan=1; FS_ini_open(FS_current_directory()+"\Novels\"+tpFolderName+"\"+tpFileName+".nsndat");
                    FS_ini_write_string("EVENT:START","scenario",tpScenario); novdat.scenario[novid]=tpScenario; novdat.Color[novid]=tpColor; novdat.OutColor[novid]=tpOutColor;
                    FS_ini_close(); novdat.isActive[novid]=1; mScenario=tpScenario;}}}} mouse_clear(mb_left);} xxw+=string_width(lang.open)+15;
        clr=c_white; oclr=c_dkgray; if (scenarioOpened==-1) {button_set_clickble(0); clr=c_gray; oclr=c_black;} if (!sChanged) {button_set_clickble(0); clr=c_gray; oclr=c_black;}
        if (button_outback(view_xview+xxw+string_width(lang.save)/2+15,view_yview+124+21,lang.save,clr,oclr,c_black,0)) {
            if (FS_file_exists(FS_current_directory()+"\Novels\"+tpFolderName+"\"+tpScenario)) {
                issuc=editor_save_scenario(FS_current_directory()+"\Novels\"+tpFolderName+"\"+tpScenario); if (issuc) {rlChan=1; sChanged=0;}}} xxw+=string_width(lang.save)+15;
        if (!sChanged) {button_set_clickble(1); clr=c_white; oclr=c_dkgray;} if (scenarioOpened==-1) {button_set_clickble(0); clr=c_gray; oclr=c_black;}
        if (button_outback(view_xview+xxw+string_width(lang.save_as)/2+15,view_yview+124+21,lang.save_as,clr,oclr,c_black,0)) {
            if (FS_file_exists(FS_current_directory()+"\Novels\"+tpFolderName+"\"+tpScenario)) {
                file=get_save_filename_ext("Scenario files|*.nsdat",tpScenario,FS_current_directory()+"\Novels\"+tpFolderName+"\","Scenario saving"); if (file!="") {
                if (string_copy(file,1,string_length(FS_current_directory()+"\Novels\"+tpFolderName+"\"))!=FS_current_directory()+"\Novels\"+tpFolderName+"\") {notcen_add("E",lang.cant_save_not_it_foldername);} else {
                /*fname=check_for_nonASCII(string(file));*/ fname=""; if (string(fname)!=string(file) &amp;&amp; fname!="") {notcen_add("E",lang.the_game_doesnt_support_nonascii);} else {
                    tpScenario=filename_name(file); xzoff=0; yzoff=0; issuc=editor_save_scenario(FS_current_directory()+"\Novels\"+tpFolderName+"\"+tpScenario);
                    if (issuc) {sChanged=0;}}}}}} xxw+=string_width(lang.save_as)+15;
        str=lang.mark_as_main; if (mScenario==tpScenario &amp;&amp; mScenario!="") {button_set_clickble(0); str=lang.already_main; clr=c_gray; oclr=c_black;}
        if (button_outback(view_xview+xxw+string_width(str)/2+15,view_yview+124+21,str,clr,oclr,c_black,0)) {rlChan=1;
            if (FS_file_exists(FS_current_directory()+"\Novels\"+tpFolderName+"\"+tpScenario)) {FS_ini_open(FS_current_directory()+"\Novels\"+tpFolderName+"\"+tpFileName+".nsndat");
            FS_ini_write_string("EVENT:START","scenario",tpScenario); novdat.scenario[novid]=tpScenario; novdat.Color[novid]=tpColor; novdat.OutColor[novid]=tpOutColor;
            FS_ini_close(); mScenario=tpScenario;}} xxw+=string_width(str)+15;
        clr=c_red; oclr=c_dkgray; if (mScenario==tpScenario &amp;&amp; mScenario!="") {button_set_clickble(1);} if (scenarioOpened==-1) {button_set_clickble(0); clr=c_gray; oclr=c_black;}
        if (button_outback(view_xview+xxw+string_width(lang.delete)/2+15,view_yview+124+21,lang.delete,clr,oclr,c_black,0)) {rlChan=1;
            if (FS_file_exists(FS_current_directory()+"\Novels\"+tpFolderName+"\"+tpScenario)) {FS_file_delete(FS_current_directory()+"\Novels\"+tpFolderName+"\"+tpScenario);
            scenarioOpened=-1; if (mScenario=tpScenario) {FS_ini_open(FS_current_directory()+"\Novels\"+tpFolderName+"\"+tpFileName+".nsndat");
            FS_ini_write_string("EVENT:START","scenario",""); novdat.isActive[novid]=0; tpScenario=""; novdat.scenario[novid]="";
            FS_ini_close(); mScenario=tpScenario;} tpScenario="";}} xxw+=string_width(str)+15;} if (tabSelected==0 &amp;&amp; scenarioOpened!=-1) {if (mScenario==tpScenario &amp;&amp; mScenario!="") {button_set_clickble(1);}
        draw_text_set(Century20,c_white,fa_left,fa_top); draw_text_outline(view_xview+string_width(lang.add)/2+15,view_yview+146+25,lang.add+": ");
        lsSMenu=shMenu; yyh2=string_height("A")+4; if (button_outback(view_xview+string_width(lang.adddialogue)/2+15,view_yview+146+20+string_height("A")/2+yyh2,lang.adddialogue,c_white,c_dkgray,c_black,0)) {shType=0; shMenu=!shMenu;} yyh2+=string_height("A")+4;
        button_set_clickble(!shMenu);
        if (button_outback(view_xview+string_width(lang.addbackground)/2+15,view_yview+146+20+string_height("A")/2+yyh2,lang.addbackground,c_white,c_dkgray,c_black,0)) {shType=1; shMenu=!shMenu;} yyh2+=string_height("A")+4;
        if (button_outback(view_xview+string_width(lang.addcharacter)/2+15,view_yview+146+20+string_height("A")/2+yyh2,lang.addcharacter,c_white,c_dkgray,c_black,0)) {shType=2; shMenu=!shMenu;} yyh2+=string_height("A")+4;
        if (button_outback(view_xview+string_width(lang.addanimation)/2+15,view_yview+146+20+string_height("A")/2+yyh2,lang.addanimation,c_white,c_dkgray,c_black,0)) {shType=3; shMenu=!shMenu;} yyh2+=string_height("A")+4;
        if (button_outback(view_xview+string_width(lang.addmusic)/2+15,view_yview+146+20+string_height("A")/2+yyh2,lang.addmusic,c_white,c_dkgray,c_black,0)) {shType=4; shMenu=!shMenu;} yyh2+=string_height("A")+4;
        if (button_outback(view_xview+string_width(lang.addsound)/2+15,view_yview+146+20+string_height("A")/2+yyh2,lang.addsound,c_white,c_dkgray,c_black,0)) {shType=5; shMenu=!shMenu;} yyh2+=string_height("A")+4;
        if (button_outback(view_xview+string_width(lang.addambient)/2+15,view_yview+146+20+string_height("A")/2+yyh2,lang.addambient,c_white,c_dkgray,c_black,0)) {shType=6; shMenu=!shMenu;} yyh2+=string_height("A")+4;
        if (button_outback(view_xview+string_width(lang.addcustomization)/2+15,view_yview+146+20+string_height("A")/2+yyh2,lang.addcustomization,c_white,c_dkgray,c_black,0)) {shType=7; shMenu=!shMenu;} yyh2+=string_height("A")+4;
        if (button_outback(view_xview+string_width(lang.addscenario)/2+15,view_yview+146+20+string_height("A")/2+yyh2,lang.addscenario,c_white,c_dkgray,c_black,0)) {shType=8; shMenu=!shMenu;} yyh2+=string_height("A")+4;
        if (button_outback(view_xview+string_width(lang.addvar)/2+15,view_yview+146+20+string_height("A")/2+yyh2,lang.addvar,c_white,c_dkgray,c_black,0)) {shType=9; shMenu=!shMenu;} yyh2+=string_height("A")+4;
        if (button_outback(view_xview+string_width(lang.addlogic)/2+15,view_yview+146+20+string_height("A")/2+yyh2,lang.addlogic,c_white,c_dkgray,c_black,0)) {shType=10; shMenu=!shMenu;} yyh2+=string_height("A")+4;
        if (button_outback(view_xview+string_width(lang.addspecial)/2+15,view_yview+146+20+string_height("A")/2+yyh2,lang.addspecial,c_white,c_dkgray,c_black,0)) {shType=11; shMenu=!shMenu;} yyh2+=string_height("A")+4;
        if (shMenu) {button_set_clickble(1); draw_set_alpha(((alpha*255)*0.306)/255); maxstr="Задний фон"; ststr=lang.adddialogue; stcount=1; yyh=(string_height("A")+4)*shType; if (shType==11) {yyh-=(string_height("A")+4)*3;}
            if (shType==0) {stcount=4; ststr=lang.adddialogue; maxstr="Текст персонажа";} if (shType==1) {stcount=2; ststr=lang.addbackground; maxstr="Спрятать";} if (shType==2) {stcount=2; ststr=lang.addcharacter; maxstr="Показать";}
            if (shType==3) {stcount=3; ststr=lang.addanimation; maxstr="Добавить к персонажу";} if (shType==4) {stcount=2; ststr=lang.addmusic; maxstr="Воспроизвести";} if (shType==5) {stcount=2; ststr=lang.addsound; maxstr="Проиграть";}
            if (shType==6) {stcount=2; ststr=lang.addambient; maxstr="Воспроизвести";} if (shType==7) {stcount=1; ststr=lang.addcustomization; maxstr="Свойства диалога";} if (shType==8) {stcount=2; ststr=lang.addscenario; maxstr="Начать заново";}
            if (shType==9) {stcount=2; ststr=lang.addvar; maxstr="Изменить";} if (shType==10) {stcount=1; ststr=lang.addlogic; maxstr="'Если' ... 'то' ...";} if (shType==11) {stcount=4; ststr=lang.addspecial; maxstr="Пропуск по времени";}
            draw_rectangle_colour(view_xview+string_width(ststr)+20,view_yview+146+20+string_height("A")+yyh,view_xview+string_width(ststr)+string_width(maxstr)+30,view_yview+146+30+((string_height("A")+3)*(stcount+1))+yyh,c_black,c_black,c_black,c_black,0); draw_set_alpha(alpha);
            if (shType==0) {if (button_outback(view_xview+string_width(lang.adddialogue)+string_width("Текст автора")/2+25,view_yview+146+25+string_height("A")/2+string_height("A")+yyh,"Текст автора",c_white,c_dkgray,c_black,0)) {isHoverAdding=0;} yyh+=string_height("A")+3;
                if (button_outback(view_xview+string_width(lang.adddialogue)+string_width("Текст персонажа")/2+25,view_yview+146+25+string_height("A")/2+string_height("A")+yyh,"Текст персонажа",c_white,c_dkgray,c_black,0)) {isHoverAdding=18;} yyh+=string_height("A")+3;
                if (button_outback(view_xview+string_width(lang.adddialogue)+string_width("Мысли")/2+25,view_yview+146+25+string_height("A")/2+string_height("A")+yyh,"Мысли",c_white,c_dkgray,c_black,0)) {isHoverAdding=19;} yyh+=string_height("A")+3;
                if (button_outback(view_xview+string_width(lang.adddialogue)+string_width("Выбор")/2+25,view_yview+146+25+string_height("A")/2+string_height("A")+yyh,"Выбор",c_white,c_dkgray,c_black,0)) {isHoverAdding=27;} yyh+=string_height("A")+3;}
            if (shType==1) {if (button_outback(view_xview+string_width(lang.addbackground)+string_width("Показать")/2+25,view_yview+146+25+string_height("A")/2+string_height("A")+yyh,"Показать",c_white,c_dkgray,c_black,0)) {isHoverAdding=1;} yyh+=string_height("A")+3;
                if (button_outback(view_xview+string_width(lang.addbackground)+string_width("Спрятать")/2+25,view_yview+146+25+string_height("A")/2+string_height("A")+yyh,"Спрятать",c_white,c_dkgray,c_black,0)) {isHoverAdding=2;} yyh+=string_height("A")+3;}
            if (shType==2) {if (button_outback(view_xview+string_width(lang.addcharacter)+string_width("Показать")/2+25,view_yview+146+25+string_height("A")/2+string_height("A")+yyh,"Показать",c_white,c_dkgray,c_black,0)) {isHoverAdding=3;} yyh+=string_height("A")+3;
                if (button_outback(view_xview+string_width(lang.addcharacter)+string_width("Спрятать")/2+25,view_yview+146+25+string_height("A")/2+string_height("A")+yyh,"Спрятать",c_white,c_dkgray,c_black,0)) {isHoverAdding=20;} yyh+=string_height("A")+3;}
            if (shType==3) {if (button_outback(view_xview+string_width(lang.addanimation)+string_width("Добавить к заднику")/2+25,view_yview+146+25+string_height("A")/2+string_height("A")+yyh,"Добавить к заднику",c_white,c_dkgray,c_black,0)) {isHoverAdding=4;} yyh+=string_height("A")+3;
                if (button_outback(view_xview+string_width(lang.addanimation)+string_width("Добавить к персонажу")/2+25,view_yview+146+25+string_height("A")/2+string_height("A")+yyh,"Добавить к персонажу",c_white,c_dkgray,c_black,0)) {isHoverAdding=5;} yyh+=string_height("A")+3;
                if (button_outback(view_xview+string_width(lang.addanimation)+string_width("Остановить")/2+25,view_yview+146+25+string_height("A")/2+string_height("A")+yyh,"Остановить",c_white,c_dkgray,c_black,0)) {isHoverAdding=6;} yyh+=string_height("A")+3;}
            if (shType==4) {if (button_outback(view_xview+string_width(lang.addmusic)+string_width("Воспроизвести")/2+25,view_yview+146+25+string_height("A")/2+string_height("A")+yyh,"Воспроизвести",c_white,c_dkgray,c_black,0)) {isHoverAdding=7;} yyh+=string_height("A")+3;
                if (button_outback(view_xview+string_width(lang.addmusic)+string_width("Стоп")/2+25,view_yview+146+25+string_height("A")/2+string_height("A")+yyh,"Стоп",c_white,c_dkgray,c_black,0)) {isHoverAdding=8;} yyh+=string_height("A")+3;}
            if (shType==5) {if (button_outback(view_xview+string_width(lang.addsound)+string_width("Проиграть")/2+25,view_yview+146+25+string_height("A")/2+string_height("A")+yyh,"Проиграть",c_white,c_dkgray,c_black,0)) {isHoverAdding=9;} yyh+=string_height("A")+3;
                if (button_outback(view_xview+string_width(lang.addsound)+string_width("Стоп")/2+25,view_yview+146+25+string_height("A")/2+string_height("A")+yyh,"Стоп",c_white,c_dkgray,c_black,0)) {isHoverAdding=10;} yyh+=string_height("A")+3;}
            if (shType==6) {if (button_outback(view_xview+string_width(lang.addambient)+string_width("Воспроизвести")/2+25,view_yview+146+25+string_height("A")/2+string_height("A")+yyh,"Воспроизвести",c_white,c_dkgray,c_black,0)) {isHoverAdding=11;} yyh+=string_height("A")+3;
                if (button_outback(view_xview+string_width(lang.addambient)+string_width("Стоп")/2+25,view_yview+146+25+string_height("A")/2+string_height("A")+yyh,"Стоп",c_white,c_dkgray,c_black,0)) {isHoverAdding=12;} yyh+=string_height("A")+3;}
            if (shType==7) {if (button_outback(view_xview+string_width(lang.addcustomization)+string_width("Свойства диалога")/2+25,view_yview+146+25+string_height("A")/2+string_height("A")+yyh,"Свойства диалога",c_white,c_dkgray,c_black,0)) {isHoverAdding=13;} yyh+=string_height("A")+3;}
            if (shType==8) {if (button_outback(view_xview+string_width(lang.addscenario)+string_width("Прыгнуть на")/2+25,view_yview+146+25+string_height("A")/2+string_height("A")+yyh,"Прыгнуть на",c_white,c_dkgray,c_black,0)) {isHoverAdding=14;} yyh+=string_height("A")+3;
                if (button_outback(view_xview+string_width(lang.addscenario)+string_width("Начать заново")/2+25,view_yview+146+25+string_height("A")/2+string_height("A")+yyh,"Начать заново",c_white,c_dkgray,c_black,0)) {isHoverAdding=25;} yyh+=string_height("A")+3;}
            if (shType==9) {if (button_outback(view_xview+string_width(lang.addvar)+string_width("Объявить")/2+25,view_yview+146+25+string_height("A")/2+string_height("A")+yyh,"Объявить",c_white,c_dkgray,c_black,0)) {isHoverAdding=15;} yyh+=string_height("A")+3;
                if (button_outback(view_xview+string_width(lang.addvar)+string_width("Изменить")/2+25,view_yview+146+25+string_height("A")/2+string_height("A")+yyh,"Изменить",c_white,c_dkgray,c_black,0)) {isHoverAdding=21;} yyh+=string_height("A")+3;}
            if (shType==10) {if (button_outback(view_xview+string_width(lang.addlogic)+string_width("'Если' ... 'то' ...")/2+25,view_yview+146+25+string_height("A")/2+string_height("A")+yyh,"'Если' ... 'то' ...",c_white,c_dkgray,c_black,0)) {isHoverAdding=16;} yyh+=string_height("A")+3;}
            if (shType==11) {if (button_outback(view_xview+string_width(lang.addspecial)+string_width("Ждать")/2+25,view_yview+146+25+string_height("A")/2+string_height("A")+yyh,"Ждать",c_white,c_dkgray,c_black,0)) {isHoverAdding=17;} yyh+=string_height("A")+3;
                if (button_outback(view_xview+string_width(lang.addspecial)+string_width("Пропуск по времени")/2+25,view_yview+146+25+string_height("A")/2+string_height("A")+yyh,"Пропуск по времени",c_white,c_dkgray,c_black,0)) {isHoverAdding=22;} yyh+=string_height("A")+3;
                if (button_outback(view_xview+string_width(lang.addspecial)+string_width("Оповещение")/2+25,view_yview+146+25+string_height("A")/2+string_height("A")+yyh,"Оповещение",c_white,c_dkgray,c_black,0)) {isHoverAdding=23;} yyh+=string_height("A")+3;
                if (button_outback(view_xview+string_width(lang.addspecial)+string_width("Конец игры")/2+25,view_yview+146+25+string_height("A")/2+string_height("A")+yyh,"Конец игры",c_white,c_dkgray,c_black,0)) {isHoverAdding=24;} yyh+=string_height("A")+3;}}
        if (mouse_check_button_pressed(mb_left) &amp;&amp; global.btCl1) {if (lsSMenu==shMenu &amp;&amp; isHoverAdding==-1) {shMenu=0;}}
        str=""; if (isHoverAdding!=-1) {if (isHoverAdding==0) {str=lang.adddialogue;} if (isHoverAdding==1) {str=lang.addbackground;} if (isHoverAdding==2) {str=lang.addbackground;}
            if (isHoverAdding==3) {str=lang.addcharacter;} if (isHoverAdding==4) {str=lang.addanimation;} if (isHoverAdding==5) {str=lang.addanimation;} if (isHoverAdding==6) {str=lang.addanimation;} if (isHoverAdding==27) {str=lang.adddialogue;}
            if (isHoverAdding==7) {str=lang.addmusic;} if (isHoverAdding==8) {str=lang.addmusic;} if (isHoverAdding==9) {str=lang.addsound;} if (isHoverAdding==10) {str=lang.addsound;} if (isHoverAdding==26) {str=ds_list_find_value(tpSList,hoverid); draw_set_font(Century16);}
            if (isHoverAdding==11) {str=lang.addambient;} if (isHoverAdding==12) {str=lang.addambient;} if (isHoverAdding==13) {str=lang.addcustomization;} if (isHoverAdding==14) {str=lang.addscenario;} if (isHoverAdding==25) {str=lang.addscenario;}
            if (isHoverAdding==15) {str=lang.addvar;} if (isHoverAdding==16) {str=lang.addlogic;} if (isHoverAdding==17) {str=lang.addspecial;} if (isHoverAdding==18) {str=lang.adddialogue;} if (isHoverAdding==24) {str=lang.addspecial;}
            if (isHoverAdding==19) {str=lang.adddialogue;} if (isHoverAdding==20) {str=lang.addcharacter;} if (isHoverAdding==21) {str=lang.addvar;} if (isHoverAdding==22) {str=lang.addspecial;} if (isHoverAdding==23) {str=lang.addspecial;}
            draw_text_outline(mouse_x+15,mouse_y+10,str);}
        if (mouse_check_button_released(mb_left)) {if (isHoverAdding!=-1) {hoverid=-2; isHoverAdding=-1;}} if (mouse_check_button_released(mb_middle)) {if (zoomHolding) {zoomHolding=0;}}
        if (mouse_check_button_pressed(mb_middle) &amp;&amp; global.btCl1) {bttime=0; lstxz=xzoff; lstyz=yzoff; bfx=mouse_x; bfy=mouse_y;} if (mouse_check_button(mb_middle) &amp;&amp; global.btCl1) {
            if (mouse_x!=bfx||mouse_y!=bfy) {zoomHolding=1;} if (bttime&lt;8) {bttime+=1;} else {zoomHolding=1;}} else {bttime=0;}
        if (zoomHolding) {hmx=mouse_x-bfx; hmy=mouse_y-bfy; xzoff=lstxz+hmx; yzoff=lstyz+hmy;}}
    if (tabSelected==1 || lstTSel==1) {xxw=10; draw_text_set(Century20,c_white,fa_center,fa_top);
        if (button_outback(view_xview+xxw+string_width(lang.new)/2+15,view_yview+124+21,lang.new,c_white,c_dkgray,c_black,0)) {} xxw+=string_width(lang.new)+15;
        if (button_outback(view_xview+xxw+string_width(lang.open)/2+15,view_yview+124+21,lang.open,c_white,c_dkgray,c_black,0)) {} xxw+=string_width(lang.open)+15;
        clr=c_white; oclr=c_dkgray; if (animationOpened==-1) {button_set_clickble(0); clr=c_gray; oclr=c_black;}
        if (button_outback(view_xview+xxw+string_width(lang.save)/2+15,view_yview+124+21,lang.save,clr,oclr,c_black,0)) {} xxw+=string_width(lang.save)+15;}
    if (tabSelected==2 || lstTSel==2) {}
    if (tabSelected==4 || lstTSel==4) {}
    if (tabSelected==6 || lstTSel==6) {xxw=10+15; draw_text_set(Century20,c_white,fa_center,fa_top);
        clr=c_white; if (guiSel==0) {clr=c_orange; draw_set_alpha(((alpha*255)*0.406)/255); draw_rectangle_colour(view_xview+xxw-5,view_yview+clamp(yrest,125,125),view_xview+xxw+string_width(lang.main_menu)+5,view_yview+clamp(yrest,124,166),c_white,c_white,c_white,c_white,0); draw_set_alpha(alpha);}
        if (button_outback(view_xview+xxw+string_width(lang.main_menu)/2,view_yview+124+21,lang.main_menu,clr,c_dkgray,c_black,0)) {guiSel=0;} xxw+=string_width(lang.main_menu)+15;
        clr=c_white; if (guiSel==1) {clr=c_orange; draw_set_alpha(((alpha*255)*0.406)/255); draw_rectangle_colour(view_xview+xxw-5,view_yview+clamp(yrest,125,125),view_xview+xxw+string_width(lang.game_pause)+5,view_yview+clamp(yrest,124,166),c_white,c_white,c_white,c_white,0); draw_set_alpha(alpha);}
        if (button_outback(view_xview+xxw+string_width(lang.game_pause)/2,view_yview+124+21,lang.game_pause,clr,c_dkgray,c_black,0)) {guiSel=1;} xxw+=string_width(lang.game_pause)+15;
        clr=c_white; if (guiSel==2) {clr=c_orange; draw_set_alpha(((alpha*255)*0.406)/255); draw_rectangle_colour(view_xview+xxw-5,view_yview+clamp(yrest,125,125),view_xview+xxw+string_width(lang.hud)+5,view_yview+clamp(yrest,124,166),c_white,c_white,c_white,c_white,0); draw_set_alpha(alpha);}
        if (button_outback(view_xview+xxw+string_width(lang.hud)/2,view_yview+124+21,lang.hud,clr,c_dkgray,c_black,0)) {guiSel=2;} xxw+=string_width(lang.hud)+15;}}}
    
    draw_text_set(Century20,c_white,fa_center,fa_top);
    crstr=""; if (tabSelected==0) {crstr=lang.scenario;} if (tabSelected==1) {crstr=lang.animation;} if (tabSelected==2) {crstr=lang.character;} if (tabSelected==3) {crstr=lang.background;} if (tabSelected==4) {crstr=lang.audio;} if (tabSelected==5) {crstr=lang.variables;} if (tabSelected==6) {crstr=lang.gui_elements;} if (tabSelected==7) {crstr=lang.achievements;}
    if (yrest&gt;82) {if (tabSelected!=-1) {draw_set_alpha(((alpha*255)*0.406)/255); if (!isex[tabSelected]) {draw_rectangle_colour(view_xview+xxws[tabSelected]+15,view_yview+clamp(yrest,83,83),view_xview+xxws[tabSelected]+30+string_width(crstr),view_yview+clamp(yrest,82,124),c_white,c_white,c_white,c_white,0);}
            else {draw_rectangle_colour(view_xview+maxxw+15-5,view_yview+clamp(yrest,83,83),view_xview+maxxw+15+string_width("[\/]")+5,view_yview+clamp(yrest,82,124),c_white,c_white,c_white,c_white,0);} draw_set_alpha(alpha);} xxw=4;
        rmprds=0; mUnderExMenu=0; if (exMenu) {draw_set_alpha(((alpha*255)*0.306)/255); rxxw=view_wview-10; button_set_clickble(1);
            draw_rectangle_colour(view_xview+rxxw-maxtxtw,view_yview+124,view_xview+rxxw+10,view_yview+124+((tCount-exStart)*string_height("A")+(tCount-exStart)*3),c_black,c_black,c_black,c_black,0); draw_set_alpha(alpha);
            if (cursor_under_button(view_xview+rxxw-maxtxtw+((view_xview+rxxw+5)-(view_xview+rxxw-maxtxtw))/2,view_yview+124+((tCount-exStart)*string_height("A")+(tCount-exStart)*3)/2,(view_xview+rxxw+5)-(view_xview+rxxw-maxtxtw),((tCount-exStart)*string_height("A")+(tCount-exStart)*3))) {
                mUnderExMenu=1;} else {if (mouse_check_button_pressed(mb_left)) {exMenu=0; mUnderExMenu=0; rmprds=1; mouse_clear(mb_left);}}} button_set_clickble(1);
        exCount=0; maxxw=0; tCount=0; ed_draw_tab(lang.scenario); ed_draw_tab(lang.animation); ed_draw_tab(lang.character); ed_draw_tab(lang.background);
        ed_draw_tab(lang.audio); ed_draw_tab(lang.variables); ed_draw_tab(lang.gui_elements); ed_draw_tab(lang.achievements); button_set_clickble(1);
        txt=lang.test; isex[tCount]=xxw+string_width(txt)+60&gt;view_wview; if (isex[tCount]) {exCount+=1; exMenuEnabled=1; if (maxxw==0) {exStart=tCount; maxxw=xxw;}} clr=c_lime; outclr=c_dkgray; if (!isex[tCount] || (isex[tCount] &amp;&amp; exMenu)) {
        xxwbefore=xxw; if (isex[tCount] &amp;&amp; exMenu) {if (string_width(txt)&gt;maxtxtw) {maxtxtw=string_width(txt)+5;} xxw=view_wview-maxtxtw-5-15;; yyhs=21+(exCount-1)*string_height("A")+(3*(exCount-1))+string_height("A")/2;} else {yyhs=0;}
        flexists=FS_file_exists(FS_current_directory()+"\Novels\"+tpFolderName+"\"+tpScenario); if (!novdat.isActive[novid]) {button_set_clickble(0); clr=c_gray; outclr=c_black;}
        if (button_outback(view_xview+xxw+15+string_width(lang.test)/2,view_yview+82+21+yyhs,lang.test,clr,outclr,c_black,0)) {if (sChanged &amp;&amp; flexists) {rlChan=1;
            issuc=editor_save_scenario(FS_current_directory()+"\Novels\"+tpFolderName+"\"+tpScenario); if (issuc) {sChanged=0;}}
                global.lstchSel=chSel; global.lststSel=stSel;
                global.lexzoom=xzoff; global.leyzoom=yzoff; global.lex5zoom=x5zoff; global.ley5zoom=y5zoff; global.lstguiSel=guiSel; global.isTesting=1; game_init(novid);} xxw=xxwbefore; if (!novdat.isActive[novid]) {button_set_clickble(trTo==1);}} tCount+=1;
        if (exMenuEnabled) {draw_text_set(Century20,c_white,fa_center,fa_top); if (button_outback(view_xview+maxxw+15+string_width("[\/]")/2,view_yview+82+21,"[\/]",c_aqua,c_black,c_black,1)) {if (!rmprds) {exMenu=!exMenu;}}}}}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>    /*draw_set_alpha(alpha); if (etype==0) {draw_text_set(Pacifica28,c_white,fa_center,fa_top); button_set_clickble(trTo==0);
    draw_set_alpha(alpha/2); draw_rectangle_colour(view_xview+320,view_yview+30,view_xview+view_wview-320,view_yview+view_hview-110,c_black,c_black,c_black,c_black,0);
    draw_set_alpha(alpha); yyh=32; draw_text_outline(view_xview+view_wview/2,view_yview+yyh,"Main information"); yyh+=string_height("A")+10;
    draw_text_set(Pacifica21,c_white,fa_left,fa_top); draw_text_outline(view_xview+325,view_yview+yyh,"Name: "); _str=tpName; clr=global.mButtonClr; if (tpName=="") {_str="Type your novel's name here."; clr=c_red;}
    if (button_outback(view_xview+325+string_width("Name: ")+string_width(_str)/2,view_yview+yyh+string_height("A")/2,_str,clr,global.mButtonOutClr,c_black,1)) {
        gts=get_string("Type your novel's name here: ",tpName); if (gts!="") {tpName=gts; if (cFChange) {tpFolderName=tpName; fSet=check_for_folder_available(tpName); if (fSet!="") {tpFolderName=fSet; fldr=1;}}}} yyh+=string_height("A")+5;
    if (fldr) {draw_text_set(Pacifica16,c_white,fa_left,fa_top); str="The name of your novel contains some unsupported#symbols! The game has setted your FolderName#itself."; draw_text_outline_ext(view_xview+325,view_yview+yyh,str,c_red,c_black); yyh+=string_height(str)+5;
        draw_text_set(Pacifica21,c_white,fa_left,fa_top);
        draw_text_outline(view_xview+325,view_yview+yyh,"Folder Name: "); _str=tpFolderName; if (tpFolderName=="") {_str="Type your novel's FolderName here.";}
        if (button_outback(view_xview+325+string_width("Folder Name: ")+string_width(_str)/2,view_yview+yyh+string_height("A")/2,_str,global.mButtonClr,global.mButtonOutClr,c_black,1)) {
            gts=get_string("Type your novel's Folder Name here: ",tpFolderName); if (gts!="") {tpFolderName=gts; fSet=check_for_folder_available(tpName); if (fSet!="") {tpFolderName=fSet; stfldr=1;} else {stfldr=0;}}} yyh+=string_height("A")+5;
        if (stfldr) {draw_text_set(Pacifica16,c_white,fa_left,fa_top); draw_text_outline_ext(view_xview+325,view_yview+yyh,"Your Folder Name still has unsupported symbols!",c_red,c_black); yyh+=string_height("A")+5;}} else {
        draw_text_set(Pacifica21,c_white,fa_left,fa_top); draw_text_outline(view_xview+325,view_yview+yyh,"Folder Name: "+string(tpFolderName)); yyh+=string_height("A")+5;}
    draw_text_set(Pacifica21,c_white,fa_left,fa_top); draw_text_outline(view_xview+325,view_yview+yyh,"Author: "); _str=tpAuthor; clr=global.mButtonClr; if (tpAuthor=="") {clr=c_red; _str="Type yours username here.";}
    if (button_outback(view_xview+325+string_width("Author: ")+string_width(_str)/2,view_yview+yyh+string_height("A")/2,_str,clr,global.mButtonOutClr,c_black,1)) {
        gts=get_string("Type yours username here: ",tpAuthor); if (gts!="") {tpAuthor=gts;}} yyh+=string_height("A")+5;
    draw_text_set(Pacifica16,c_white,fa_left,fa_top); draw_text_outline_ext(view_xview+325,view_yview+yyh,"If you'll decide to change your FolderName#you will have to do it manually!",c_red,c_black);
    draw_text_set(Pacifica28,c_white,fa_center,fa_middle); if (button_outback(view_xview+view_wview/2,view_yview+view_hview-130,lang.scontinue+" &gt;",c_lime,global.mButtonOutClr,c_black,0)) {
        if (tpName!="" &amp;&amp; tpFolderName!="") {fldr=0; stfldr=0; cFChange=0; if (global.isNExists&lt;=-1) {story_imitate_blank(novid); tpFileName=tpFolderName;}
            if (!FS_directory_exists(FS_current_directory()+"\Novels\"+tpFolderName+"\")) {FS_directory_create(FS_current_directory()+"\Novels\"+tpFolderName+"\");}
            FS_ini_open(FS_current_directory()+"\Novels\"+tpFileName+".nsndat");
                FS_ini_write_string("NOVELDATA","Name",tpName); novdat.Name[novid]=tpName;
                FS_ini_write_string("NOVELDATA","Author",tpAuthor); novdat.Author[novid]=tpAuthor;
                FS_ini_write_string("NOVELDATA","FolderName",tpFolderName); novdat.FolName[novid]="Novels\"+tpFolderName;
                novdat.FName[novid]=FS_current_directory()+"\Novels\"+tpFileName+".nsndat"; novdat.FileName[novid]=tpFileName;
                if (global.isNExists&lt;=-1) {novdat.Version[novid]=0; novdat.Background[novid]=""; novdat.Deleted[novid]=0;
                    novdat.Music[novid]=""; novdat.MusicPreview[novid]=0; novdat.isActive[novid]=0; //if (global.isNExists&lt;=-1) {novdat.FileName[novid]=tpFolderName+".nsndat";}
                    novdat.Color[novid]=c_gray; novdat.OutColor[novid]=c_black;}
            FS_ini_close(); FS_ini_open("Data\ndb\"+string(tpFolderName)+".nsldb");
                if (string_length(string(current_month))&gt;1) {mt=string(current_month);} else {mt="0"+string(current_month);}
                if (string_length(string(current_day))&gt;1) {dt=string(current_day);} else {mt="0"+string(current_day);}
                if (string_length(string(current_hour))&gt;1) {ht=string(current_hour);} else {ht="0"+string(current_hour);}
                if (string_length(string(current_minute))&gt;1) {mmt=string(current_minute);} else {mmt="0"+string(current_minute);}
                if (string_length(string(current_second))&gt;1) {st=string(current_second);} else {st="0"+string(current_second);}
                crTime=real(string(current_year)+string(mt)+string(dt)+string(ht)+string(mmt)+string(st));
                FS_ini_write_string(global.uniqueNumber,"date",string(crTime)); FS_ini_close();
            if (global.isNExists&lt;=-1) {global.nEDid=global.novelCount; novid=global.nEDid; global.inNExists=global.nEDid; global.novelCount+=1;
                notcen_add("N","Your novel was created!");} trTo=1;}}
    draw_text_set(Pacifica28,c_white,fa_center,fa_top);
    if (button_outback(view_xview+view_wview/2,view_yview+view_hview-string_height("A")-5,"&lt; "+lang.cancel,global.mButtonClr,global.mButtonOutClr,c_black,0)) {goToMenu=1;}}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
